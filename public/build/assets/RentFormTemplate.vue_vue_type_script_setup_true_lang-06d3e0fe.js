import{$ as V,N as $,q as u}from"./atmosphere-ui-cf0281b4.js";import{_ as w}from"./AppButton.vue_vue_type_script_setup_true_lang-bb509e3b.js";import{_ as k}from"./RentFormPersonal.vue_vue_type_script_setup_true_lang-a60226c7.js";import{_ as C}from"./RentFormProperty.vue_vue_type_script_setup_true_lang-f99c8f01.js";import{_ as M}from"./RentFormContract.vue_vue_type_script_setup_true_lang-0bb80329.js";import{_ as N}from"./RentFormFees.vue_vue_type_script_setup_true_lang-05c9e092.js";import{f as v,d as c}from"./index-8305cd09.js";import{a as _}from"./index-17a9d477.js";import{k as P,z as U,l as p,r as B,d as F,f as T,b as n,w as o,u as i,o as q,a as S,h as y,t as j}from"./app-5778ba55.js";const E={class:"flex justify-end space-x-2"},J=P({__name:"RentFormTemplate",props:{data:null,isProcessing:{type:Boolean}},emits:["submit"],setup(f,{emit:h}){const e=U({property_id:null,property:null,unit_id:null,unit:null,is_new_client:!1,client_id:null,client_name:"",client:null,date:new Date,deposit:0,deposit_due:new Date,is_deposit_received:!1,deposit_reference:"",payment_account_id:null,payment_method:"",amount:0,first_invoice_date:_(new Date,1),next_invoice_date:_(new Date,1),end_date:null,frequency:"MONTHLY",commission:10,commission_type:"",late_fee:10,late_fee_type:"",grace_days:0,additional_fees:[]});p(()=>e.unit,t=>{t&&(e.amount=t.price)}),p(()=>e.deposit_due,t=>{e.date=t},{immediate:!0}),p(()=>e.date,t=>{e.first_invoice_date=_(t,1)},{immediate:!0});const g=[{handle:()=>e.client||e.client_name},{handle:()=>e.property&&e.unit},{handle:()=>e.deposit&&e.amount}],m=()=>new Promise(t=>{var a;return t(!((a=g[s.value])!=null&&a.handle()))}),s=B(0),b=F(()=>["Datos de propiedad","Datos de renta","Cargo y Moras","Guardar"][s.value]),d=t=>{console.log(t,"updating"),Object.keys(e).forEach(a=>{t[a]&&(e[a]=t[a])})},x=()=>{var a,l,r;const t={...e,deposit_due:v(e.deposit_due,"y-M-d"),date:v(e.date,"yyyy-MM-dd"),first_invoice_date:c(e.first_invoice_date),next_invoice_date:c(e.next_invoice_date),end_date:c(e.end_date),unit_id:(a=e.unit)==null?void 0:a.id,property_id:(l=e.property)==null?void 0:l.id,client_id:(r=e.client)==null?void 0:r.id};delete t.property,delete t.client,delete t.unit,h("submit",t)};return(t,a)=>(q(),T("section",null,[n(i(V),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),"finish-status":"success",simple:"",style:{"margin-top":"20px"},onFinished:x},{footer:o(({prev:l,next:r})=>[S("footer",E,[n(i($),{type:"secondary",rounded:"",onClick:D=>l()},{default:o(()=>[y("Atras")]),_:2},1032,["onClick"]),n(w,{variant:"inverse",rounded:"",processing:f.isProcessing,disabled:f.isProcessing,onClick:D=>r()},{default:o(()=>[y(j(i(b)),1)]),_:2},1032,["processing","disabled","onClick"])])]),default:o(()=>[n(i(u),{name:"personal",title:"Datos Personales","before-change":m},{default:o(()=>[n(k,{"model-value":e,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1}),n(i(u),{name:"property",title:"Propiedad","before-change":m},{default:o(()=>[n(C,{"model-value":e,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1}),n(i(u),{name:"rent_details",title:"Detalles de renta","before-change":m},{default:o(()=>[n(M,{"model-value":e,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1}),n(i(u),{name:"fees",title:"Cargos y mora"},{default:o(()=>[n(N,{"model-value":e,"onUpdate:modelValue":d},null,8,["model-value"])]),_:1})]),_:1},8,["modelValue"])]))}});export{J as _};
