import{_ as A}from"./trash-b41c2bba.js";import{_ as L}from"./file-8bfe57ae.js";import{o as c,f as C,a as t,l as O,d as F,r as _,c as y,w as a,u as r,C as G,b as e,E as d,h as l,t as v,y as J,ac as R,j as Z,F as q,g as $,aa as z,M as K}from"./app-e7293397.js";import{_ as Q}from"./edit-3340e0a9.js";import{t as b,F as W}from"./atmosphere-ui-86b7f8ed.js";import{_ as X}from"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import{_ as Y}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import{_ as p}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{_ as ee}from"./AppSectionHeader.vue_vue_type_script_setup_true_lang-4f8015fe.js";import{I as te}from"./IconMarker-562faee5.js";import{I as oe}from"./IconCoins-68b11b4b.js";import{I as se}from"./IconPersonSafe-7fa958bb.js";import{_ as ne}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-516e104c.js";import{_ as ae}from"./ContractCard.vue_vue_type_script_setup_true_lang-f623b58b.js";import x from"./EmptyAddTool-be692e14.js";import{_ as re}from"./UnitFormModal.vue_vue_type_script_setup_true_lang-ec9017e0.js";import{f as w}from"./formatMoney-b7ef7683.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import{_ as ie}from"./UnitTitle.vue_vue_type_script_setup_true_lang-c25f773c.js";import{_ as le}from"./UnitTag.vue_vue_type_script_setup_true_lang-5b0bf4f3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./exact-math.node-9a256fc0.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./user-outline-dcfa7b13.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./menus-f4817d1f.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./index-9dc2d84c.js";import"./index-3624ec38.js";import"./UnitForm.vue_vue_type_script_setup_true_lang-da9688a8.js";import"./sharp-photo-size-select-small-adcc5618.js";import"./constants-22f9a1fe.js";import"./chevron-right-5280f715.js";import"./constants-fbb1b618.js";const de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ce=t("path",{fill:"currentColor",d:"M14 2H6c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h7.81c-.53-.91-.81-1.95-.81-3c0-.33.03-.67.08-1H6v-2h7.81c.46-.8 1.1-1.5 1.87-2H6v-2h12v1.08c.33-.05.67-.08 1-.08s.67.03 1 .08V8l-6-6m-1 7V3.5L18.5 9H13m5 6v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"},null,-1),me=[ce];function pe(s,h){return c(),C("svg",de,me)}const ue={name:"mdi-file-document-plus",render:pe},fe={class:"p-5 mt-8"},_e={class:"flex space-x-2"},ve={class:"w-full px-5 pb-2 mb-5 space-y-5 text-gray-600 bg-white border-gray-200 shadow-md rounded-b-md"},he={class:"flex items-center justify-between py-4"},ye={class:"flex items-center space-x-2"},xe={class:"group-hover:underline underline-offset-4"},we={class:"flex space-x-5"},ge={class:"flex items-center"},$e={class:"font-bold text-success"},be=t("p",{class:"text-bold text-body-1"},"Renta Mensual",-1),Ce={class:"flex flex-col md:flex-row w-full space-x-8 rounded-t-none border-t-none"},ke={class:"w-full md:w-9/12 space-y-4"},Me={class:"flex space-x-4"},Ie={class:"space-y-4 shadow-md bg-base-lvl-3"},Pe={class:"flex w-full rounded-md px-4 py-2 justify-between"},Ee={class:"flex items-center space-x-2"},Be={class:"flex"},Fe=t("i",{class:"mr-2 fa fa-plus-circle"},null,-1),Ve={class:"w-3/12 space-y-2 rounded-md shadow-md"},Ne={class:"px-5 py-10 text-gray-600 bg-gray-200 rounded-md"},Te=t("div",{class:"header"},[t("h2",{class:"text-lg font-bold"},"Manejo de Propiedad"),t("small",null," Private place for you and your internal team to manage this project")],-1),Ue={class:"mt-4 space-y-2"},je={class:"flex space-x-4"},Et=O({__name:"Show",props:{properties:null,currentTab:{default:"summary"}},setup(s){const h=s,k=F(()=>h.properties.address.split(",")[0]),M=_(!1),m=_(null),V=F(()=>m.value&&`Pago ${h.properties.id} pago #${m.value.installment_id}`),N=()=>{d.reload()},u=_(!1),I=_(null),g=(i=null)=>{u.value=!0,I.value=i},T=async i=>{await z.confirm(`Estas seguro de eliminar la unidad ${i.name}?`,"Eliminar unidad")&&d.delete(`/properties/${h.properties.id}/units/${i.id}`,{onSuccess(){K({message:`Unidad ${i.name} borrada con exito`,title:"Unidad eliminada",type:"success"})}})},P=_(!1),U=i=>{var f;const o=i.contract?`/rents/${(f=i.contract)==null?void 0:f.id}`:`/rents/create?unit=${i.id}`;d.visit(o)};return(i,o)=>{const f=Q,j=ue,S=L,D=A,H=G("PaymentFormModal");return c(),y(Y,{title:`Propiedades / ${r(k)}`},{header:a(()=>[e(ne)]),default:a(()=>[t("main",fe,[e(ee,{name:"",class:"px-5 border-2 border-white rounded-md rounded-b-none shadow-md",resource:s.properties,title:r(k),onCreate:o[2]||(o[2]=n=>r(d).visit("/properties/create")),"hide-action":""},{actions:a(()=>[t("section",_e,[e(p,{onClick:o[0]||(o[0]=n=>r(d).visit(i.route("properties.edit",s.properties))),variant:"neutral"},{default:a(()=>[e(f)]),_:1}),e(p,{onClick:o[1]||(o[1]=n=>r(d).visit(i.route("rents.create",{propertyId:s.properties.id}))),variant:"secondary"},{default:a(()=>[e(j,{class:"mr-2"}),l(" Nuevo Contrato ")]),_:1})])]),_:1},8,["resource","title"]),t("header",ve,[t("section",he,[t("article",null,[t("p",ye,[e(te),t("span",null,v(s.properties.address),1)]),e(r(J),{class:"flex items-center space-x-2 cursor-pointer text-primary group",href:`/contacts/${s.properties.owner_id}/owners`},{default:a(()=>[e(se),t("span",xe,v(s.properties.owner.fullName),1)]),_:1},8,["href"])]),t("article",we,[t("section",null,[t("div",ge,[e(oe,{class:"mr-2 text-yellow-600"}),t("span",$e,v(r(w)(s.properties.price)),1)]),be]),e(r(R),null,{default:a(()=>[l(v(s.properties.status),1)]),_:1})])])]),t("section",Ce,[t("article",ke,[t("section",Me,[e(r(b),{class:"w-full bg-white border h-28 text-body-1",title:"Balance de Cuenta",value:r(w)(0)},null,8,["value"]),e(r(b),{class:"w-full bg-white border h-28 text-body-1",title:"Balance de Pendiente",value:r(w)(0)},null,8,["value"]),e(r(b),{class:"w-full bg-white border h-28 text-body-1",title:"Dias de mora",value:0})]),t("section",Ie,[(c(!0),C(q,null,Z(s.properties.units,n=>{var E;return c(),C("div",Pe,[t("h4",null,[e(ie,{title:n.name,"owner-name":s.properties.owner.display_name,"tenant-name":(E=n.contract)==null?void 0:E.client.display_name,price:r(w)(n.price)},null,8,["title","owner-name","tenant-name","price"])]),t("div",Ee,[e(le,{status:n.status},null,8,["status"]),t("div",Be,[e(p,{variant:"neutral",onClick:B=>U(n)},{default:a(()=>[e(S)]),_:2},1032,["onClick"]),e(p,{variant:"neutral",onClick:B=>g(n)},{default:a(()=>[e(f)]),_:2},1032,["onClick"]),e(p,{variant:"neutral",class:"hover:bg-error/80 hover:text-white transition",onClick:B=>T(n)},{default:a(()=>[e(D)]),_:2},1032,["onClick"])])])])}),256)),e(r(W),{class:"text-primary hover:font-bold",onClick:o[3]||(o[3]=n=>g())},{default:a(()=>[Fe,l(" Agregar unidad ")]),_:1})]),s.properties.contract?(c(),y(ae,{key:0,class:"p-4 border rounded-md shadow-md bg-base-lvl-3",contract:s.properties.contract},null,8,["contract"])):$("",!0)]),t("article",Ve,[t("div",Ne,[Te,t("div",Ue,[t("section",je,[e(p,{class:"w-full",variant:"secondary",disabled:P.value,processing:P.value,onClick:o[4]||(o[4]=n=>r(d).visit(`/owners/draws?filters[owner]=${s.properties.owner_id}`))},{default:a(()=>[l(" Generar Pago a "+v(s.properties.owner.names),1)]),_:1},8,["disabled","processing"])]),e(x,null,{default:a(()=>[l(" Notes ")]),_:1}),e(x,null,{default:a(()=>[l(" Imagenes ")]),_:1}),e(x,null,{default:a(()=>[l(" Documentos ")]),_:1}),e(x,{onClick:o[5]||(o[5]=n=>g())},{default:a(()=>[l(" Agregar unidad ")]),_:1})])])])]),m.value?(c(),y(H,{key:0,modelValue:M.value,"onUpdate:modelValue":o[6]||(o[6]=n=>M.value=n),payment:m.value,endpoint:`/loans/${s.properties.id}/installments/${m.value.installment_id}/pay`,due:m.value.amount,"default-concept":r(V),onSaved:o[7]||(o[7]=n=>N())},null,8,["modelValue","payment","endpoint","due","default-concept"])):$("",!0),u.value?(c(),y(X,{key:1,show:u.value,onClose:o[9]||(o[9]=n=>u.value=!1)},{default:a(()=>[e(re,{onClose:o[8]||(o[8]=n=>u.value=!1),property:s.properties,unit:I.value},null,8,["property","unit"])]),_:1},8,["show"])):$("",!0)])]),_:1},8,["title"])}}});export{Et as default};
