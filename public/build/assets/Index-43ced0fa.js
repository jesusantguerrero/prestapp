import{_ as V,B as S,a as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-0afa9cc5.js";import{o as u,f as v,a as c,U as o,ab as E,k as I,d as L,B as w,c as h,w as i,b as r,u as t,h as T,E as p,y as U,g as A,ae as P}from"./app-b9464164.js";import"./AppLayout.vue_vue_type_style_index_0_lang-0d2503f0.js";import{u as R,_ as j}from"./BaseTable.vue_vue_type_style_index_0_lang-d3c40c15.js";import D from"./LoanSectionNav-102d6475.js";import{_ as x}from"./AppButton.vue_vue_type_script_setup_true_lang-89aa5f09.js";import{_ as H}from"./AppSearch.vue_vue_type_script_setup_true_lang-b788b25f.js";import{u as O}from"./useServerSearch-99df1bc6.js";import{g as Z,a as q}from"./constants-0a903a05.js";import{I as z}from"./IconMarker-c773280e.js";import{f as F}from"./index-8305cd09.js";import{f}from"./formatMoney-b7ef7683.js";import{_ as J}from"./LoanCard.vue_vue_type_script_setup_true_lang-7c39998f.js";import"./atmosphere-ui-8913659c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-a1e2938d.js";import"./PaymentGrid-88a06cd9.js";/* empty css                                                                    */import"./mathHelper-44355b55.js";import"./exact-math.node-e9867222.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-d3f16147.js";import"./BaseSelect.vue_vue_type_script_setup_true_lang-89ccd5ed.js";/* empty css                                                   */import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-74361783.js";import"./usePaymentModal-23c75da0.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-3f2645eb.js";import"./close-45140fa9.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-d4d45920.js";import"./clientInteractions-6c951eed.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-b284cd8c.js";import"./customCell-57b73ca8.js";import"./menus-2c7b33a0.js";import"./AppSearchFilters-93f60e1e.js";const G={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},K=c("path",{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z"},null,-1),Q=[K];function W(e,n){return u(),v("svg",G,Q)}const X={name:"mdi-trash",render:W},Y={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ee=c("path",{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"},null,-1),te=[ee];function se(e,n){return u(),v("svg",Y,te)}const ae={name:"mdi-chevron-right",render:se},oe=[{name:"client",label:"Cliente",class:"text-left",headerClass:"text-left",render(e){var n;return o("div",{class:"px-4"},[o("div",{class:"flex items-start space-x-2 text-primary font-bold"},[o(z,{class:"text-primary font-bold mt-1"}),o("span",(n=e.client)==null?void 0:n.fullName)]),o("span",{class:"text-body-1 text-sm"},`${f(e.total)} (${f(e.amount)})`)])}},{name:"first_repayment_date",class:"text-center",headerClass:"text-center",label:"Fecha de inicio",render(e){return F(e.first_repayment_date)}},{name:"interest_rate",label:"Terminos",class:"text-center",headerClass:"text-center",render(e){return o("div",{class:"space-x-2"},[o("span",e.frequency),o("span",e.interest_rate+" %")])}},{name:"amount_due",label:"Por pagar",class:"text-right",headerClass:"text-right",render(e){return o("div",{class:"space-x-4  flex items-center justify-end"},[o(E,{type:Z(e.payment_status)},q(e.payment_status)),o("div",f(e.amount_due))])}},{name:"actions",label:"Acciones",class:"text-center flex my-auto justify-end pr-4",headerClass:"text-center"}],re={class:"pt-16"},ne={class:"flex space-x-4"},ie={class:"flex"},qe=I({__name:"Index",props:{loans:null,serverSearchOptions:null},setup(e){const n=e,y=L(()=>Array.isArray(n.loans)?n.loans:n.loans.data),$=async l=>{var d;await P.confirm(`Estas seguro de eliminar el prestamo ${l.id} por ${l.amount} a ${(d=l.client)==null?void 0:d.fullName}?`,"Eliminar prestamo")&&p.delete(route("loans.destroy",l),{onSuccess(){p.reload()}})},{serverSearchOptions:g}=w(n),{state:m,updateSearch:b,executeSearch:C,reset:B}=O(g,l=>{b(`/loans?${l}`)},{manual:!0}),{isMobile:_}=R();return(l,s)=>{const d=ae,k=X,M=N;return u(),h(V,{title:"Prestamos"},{header:i(()=>[r(D)]),default:i(()=>[c("main",re,[c("section",ne,[r(H,{modelValue:t(m).search,"onUpdate:modelValue":s[0]||(s[0]=a=>t(m).search=a),modelModifiers:{lazy:!0},filters:t(m).filters,"onUpdate:filters":s[1]||(s[1]=a=>t(m).filters=a),sorts:t(m).sorts,"onUpdate:sorts":s[2]||(s[2]=a=>t(m).sorts=a),class:"w-full md:flex","has-filters":!0,onClear:s[3]||(s[3]=a=>t(B)()),onBlur:t(C)},null,8,["modelValue","filters","sorts","onBlur"]),r(x,{variant:"inverse",onClick:s[4]||(s[4]=a=>t(p).visit("/loans/create")),class:"hidden md:flex"},{default:i(()=>[T(" Nuevo prestamo ")]),_:1})]),r(j,{"table-data":t(y),cols:t(oe),class:"bg-white rounded-md text-body-1 mt-4",layout:t(_)?"grid":"table"},{actions:i(({scope:{row:a}})=>[c("div",ie,[r(t(U),{class:"relative inline-block px-5 py-2 overflow-hidden font-bold text-body transition rounded-md focus:outline-none hover:bg-opacity-80 min-w-max",href:`/loans/${a.id}`},{default:i(()=>[r(d)]),_:2},1032,["href"]),r(x,{variant:"neutral",class:"hover:text-error transition hover:border-red-400",onClick:le=>$(a)},{default:i(()=>[r(k)]),_:2},1032,["onClick"])])]),card:i(({row:a})=>[r(J,{loan:a},null,8,["loan"])]),_:1},8,["table-data","cols","layout"]),t(_)?(u(),h(S,{key:0,class:"fixed bottom-16 right-5",onClick:s[5]||(s[5]=a=>t(p).visit("/loans/create"))},{default:i(()=>[r(M)]),_:1})):A("",!0)])]),_:1})}}});export{qe as default};
