import{_ as f}from"./sharp-payment-0e03bd0a.js";import{_}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{_ as h}from"./BaseTable.vue_vue_type_style_index_0_lang-39691f37.js";import{u as x}from"./usePaymentModal-f96f741a.js";import{I as g}from"./IconMarker-d6248750.js";import{f as y}from"./index-9dc2d84c.js";import{Q as e,y as b,l as $,c as r,w as c,u as C,o as d,a as I,b as v,g as P}from"./app-494b6f90.js";import{f as n}from"./formatMoney-b7ef7683.js";const k=[{name:"due_date",minWidth:100,label:"Fecha",render(a){return y(a.due_date)}},{name:"loan_id",minWidth:170,label:"Prestamo",align:"center",render(a){var s;return e(b,{class:"px-4 cursor-pointer",href:`/loans/${a.loan_id}`},[e("div",{class:"flex items-start space-x-2 text-primary font-bold"},[e(g,{class:"text-primary font-bold mt-1"}),e("span",(s=a.client)==null?void 0:s.fullName)]),e("span",{class:"text-body-1 text-sm"},`${n(a.total)} (${n(a.amount)})`)])}},{name:"amount",label:"Cuota",align:"right",class:"text-right",minWidth:100,render(a){return n(a.amount)}},{name:"capital",label:"Capital",align:"right",class:"text-right",minWidth:100,render(a){return n(a.principal)}},{name:"interest",label:"InterÃ©s",align:"right",class:"text-right",minWidth:100,render(a){return e("div",{class:"text-right"},[e("span",{class:"text-primary"},n(a.interest)),a.late_fee>0?e("span",[" + ",e("span",{class:"text-error"},n(a.late_fee))]):null])}},{name:"balance",label:"Balance pendiente",width:200,align:"right",class:"text-right",render(a){return e("div",{class:"flex space-x-4 w-full justify-end"},[e("span",a.payment_status),e("span",{class:"text-right font-bold"},n(a.final_balance))])}},{name:"actions",align:"center",label:"Acciones"}],W={class:"flex space-x-2 justify-end"},Q=$({__name:"InstallmentTable",props:{installments:null,loanId:null,hiddenCols:null},emits:["pay"],setup(a,{emit:s}){const m=a,{openModal:p}=x(),u=t=>{const l={...t,amount:parseFloat(t.amount_due)||t.amount,id:void 0,installment_id:t.id},i=`Pago prestamo ${t.loan_id} (${t.number}/${m.installments.length})`;p({data:{title:"Pagar prestamo",endpoint:`/loans/${t.loan_id}/installments/${t.id}/pay`,due:l.amount,account_id:l.account_id,payment:l,defaultConcept:i,accountsEndpoint:"/loan-accounts"}}),s("pay",t)};return(t,l)=>{const i=f;return d(),r(h,{cols:C(k),"table-data":a.installments,"hidden-cols":a.hiddenCols},{actions:c(({scope:{row:o}})=>[I("div",W,[(o==null?void 0:o.payment_status)!=="PAID"||a.loanId?(d(),r(_,{key:0,onClick:B=>u(o),variant:"inverse-secondary",class:"flex items-center justify-center"},{default:c(()=>[v(i)]),_:2},1032,["onClick"])):P("",!0)])]),_:1},8,["cols","table-data","hidden-cols"])}}});export{Q as _};
