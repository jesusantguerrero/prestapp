import{_ as S,B as V,a as M}from"./AppLayout.vue_vue_type_style_index_0_lang-3aae0800.js";import{_ as N}from"./trash-d9527c99.js";import{_ as I}from"./chevron-right-182a2a80.js";import{Q as t,ac as E,l as T,d as j,B as A,c as _,w as n,o as x,b as s,a as p,u as a,h as L,E as c,y as P,g as R,aa as w}from"./app-494b6f90.js";import{u as D,a as O,_ as q}from"./BaseTable.vue_vue_type_style_index_0_lang-39691f37.js";import{_ as z}from"./LoanSectionNav.vue_vue_type_script_setup_true_lang-185d9b4d.js";import{_ as h}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{u as F}from"./useServerSearch-a69254f0.js";import{g as J,a as Q}from"./constants-0a903a05.js";import{I as U}from"./IconMarker-d6248750.js";import{f as G}from"./index-9dc2d84c.js";import{f as d}from"./formatMoney-b7ef7683.js";import{_ as H}from"./LoanCard.vue_vue_type_script_setup_true_lang-1b537455.js";import"./atmosphere-ui-83e2a306.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-2fd658ef.js";import"./close-40de6817.js";import"./PaymentGrid-a2bc0bdb.js";import"./mathHelper-d6bc48cd.js";import"./exact-math.node-f7579f9b.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-93902e28.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-ca2f799a.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-d4cb9813.js";import"./user-outline-c87acd59.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-593db1f8.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-7ced5882.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import"./usePaymentModal-f96f741a.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-ff3d4599.js";import"./customCell-9e9ed16f.js";import"./menus-f4817d1f.js";import"./index-3624ec38.js";const K=[{name:"client",label:"Cliente",class:"text-left",headerClass:"text-left",render(e){var i;return t("div",{class:"px-4"},[t("div",{class:"flex items-start space-x-2 text-primary font-bold"},[t(U,{class:"text-primary font-bold mt-1"}),t("span",(i=e.client)==null?void 0:i.fullName)]),t("span",{class:"text-body-1 text-sm"},`${d(e.total)} (${d(e.amount)})`)])}},{name:"first_repayment_date",class:"text-center",headerClass:"text-center",label:"Fecha de inicio",render(e){return G(e.first_repayment_date)}},{name:"interest_rate",label:"Terminos",class:"text-center",headerClass:"text-center",render(e){return t("div",{class:"space-x-2"},[t("span",e.frequency),t("span",e.interest_rate+" %")])}},{name:"amount_due",label:"Por pagar",class:"text-right",headerClass:"text-right",render(e){return t("div",{class:"space-x-4  flex items-center justify-end"},[t(E,{type:J(e.payment_status)},Q(e.payment_status)),t("div",d(e.amount_due))])}},{name:"actions",label:"Acciones",class:"text-right bg-red-500",headerClass:"text-center"}],W={class:"pt-16"},X={class:"flex space-x-4"},Y={class:"flex justify-end"},Pe=T({__name:"Index",props:{loans:null,serverSearchOptions:null},setup(e){const i=e,v=j(()=>Array.isArray(i.loans)?i.loans:i.loans.data),y=async l=>{var m;await w.confirm(`Estas seguro de eliminar el prestamo ${l.id} por ${l.amount} a ${(m=l.client)==null?void 0:m.fullName}?`,"Eliminar prestamo")&&c.delete(route("loans.destroy",l),{onSuccess(){c.reload()}})},{serverSearchOptions:b}=A(i),{state:u,updateSearch:g,executeSearch:$,reset:C}=F(b,l=>{g(`/loans?${l}`)},{manual:!0}),{isMobile:f}=D();return(l,r)=>{const m=I,k=N,B=M;return x(),_(S,{title:"Prestamos"},{header:n(()=>[s(z)]),default:n(()=>[p("main",W,[p("section",X,[s(O,{modelValue:a(u).search,"onUpdate:modelValue":r[0]||(r[0]=o=>a(u).search=o),modelModifiers:{lazy:!0},class:"w-full md:flex","has-filters":!0,onClear:r[1]||(r[1]=o=>a(C)()),onBlur:a($)},null,8,["modelValue","onBlur"]),s(h,{variant:"inverse",onClick:r[2]||(r[2]=o=>a(c).visit("/loans/create")),class:"hidden md:flex items-center"},{default:n(()=>[L(" Nuevo prestamo ")]),_:1})]),s(q,{"table-data":a(v),cols:a(K),class:"bg-white rounded-md text-body-1 mt-4",layout:a(f)?"grid":"table"},{actions:n(({scope:{row:o}})=>[p("div",Y,[s(a(P),{class:"relative inline-block cursor-pointer hover:bg-primary hover:text-white px-5 py-2 overflow-hidden font-bold text-body transition rounded-md focus:outline-none hover:bg-opacity-80 min-w-max",href:`/loans/${o.id}`},{default:n(()=>[s(m)]),_:2},1032,["href"]),s(h,{variant:"neutral",class:"hover:text-error transition items-center flex flex-col justify-center hover:border-red-400",onClick:Z=>y(o)},{default:n(()=>[s(k)]),_:2},1032,["onClick"])])]),card:n(({row:o})=>[s(H,{loan:o},null,8,["loan"])]),_:1},8,["table-data","cols","layout"]),a(f)?(x(),_(V,{key:0,class:"fixed bottom-16 right-5",onClick:r[3]||(r[3]=o=>a(c).visit("/loans/create"))},{default:n(()=>[s(B)]),_:1})):R("",!0)])]),_:1})}}});export{Pe as default};
