import{l as L,d as f,r as m,c as M,w as i,u,o as S,b as n,h as $,t as k,E as w}from"./app-e7293397.js";import{_ as C}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import{_ as R}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{_ as T}from"./LoanSectionNav.vue_vue_type_script_setup_true_lang-6869f5ef.js";import{r as h}from"./createLoan-95aa21fa.js";import"./exact-math.node-9a256fc0.js";import{f as p}from"./index-9dc2d84c.js";import{_ as B}from"./LoanForm.vue_vue_type_script_setup_true_lang-0af5f483.js";import"./atmosphere-ui-86b7f8ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./formatMoney-b7ef7683.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./user-outline-dcfa7b13.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./constants-22f9a1fe.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./menus-f4817d1f.js";import"./index-3624ec38.js";import"./InstallmentTable.vue_vue_type_script_setup_true_lang-cbcb4ed7.js";import"./sharp-payment-a1c72b2d.js";import"./BaseTable.vue_vue_type_style_index_0_lang-efd97e4a.js";import"./customCell-f0a6687f.js";import"./IconMarker-562faee5.js";import"./generateInstallments-d1542e70.js";import"./index-17a9d477.js";import"./FormSection.vue_vue_type_script_setup_true_lang-bb2801db.js";import"./LoanSummary.vue_vue_type_script_setup_true_lang-bea8f4d9.js";import"./IconCoins-68b11b4b.js";const gt=L({__name:"Refinance",props:{loans:null},setup(l){const a=l,_=f(()=>{var t,o;return(t=a.loans)!=null&&t.id?`Prestamo ${(o=a.loans.client)==null?void 0:o.fullName}`:"Crear Prestamo"}),y=f(()=>{var t;return(t=a.loans)!=null&&t.id?"Guardar prestamo":"Registrar Prestamo"}),d=m(),s=m(!1),r=m(!1),v=t=>{var e,c;const o={...t,date:p(t.disbursement_date,"yyyy-MM-dd"),disbursement_date:p(t.disbursement_date,"yyyy-MM-dd"),first_repayment_date:p(t.first_repayment_date,"y-M-d"),client_id:t.client.id,source_type:(e=t.sourceType)==null?void 0:e.id,source_account_id:(c=t.sourceAccount)==null?void 0:c.id};r.value=!0,h(a.loans.id,o).then(()=>{close(),x()}).catch(g=>{console.log(g)}).finally(()=>{r.value=!1})},b=()=>{d.value.submit()},x=()=>{w.visit("/loans")};return(t,o)=>(S(),M(C,{title:u(_)},{header:i(()=>[n(T,null,{actions:i(()=>[n(R,{variant:"secondary",class:"hidden md:flex",onClick:b,disabled:!s.value},{default:i(()=>[$(k(u(y)),1)]),_:1},8,["disabled"])]),_:1})]),default:i(()=>[n(B,{class:"flex flex-col md:flex-row w-full pb-10 mt-24 md:mt-16 md:space-x-4",ref_key:"loanFormRef",ref:d,loans:l.loans,"is-loading":r.value,"onUpdate:isLoading":o[0]||(o[0]=e=>r.value=e),"can-save":s.value,"onUpdate:canSave":o[1]||(o[1]=e=>s.value=e),onSubmit:v},null,8,["loans","is-loading","can-save"])]),_:1},8,["title"]))}});export{gt as default};
