import{o as _,f as g,a as d,U as a,ab as w,k as N,d as y,B as U,ac as E,ad as L,c as I,w as i,b as n,a4 as T,u as e,E as p,h as $,y as A,ae as j}from"./app-5778ba55.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-3f2d2e09.js";import"./AppLayout.vue_vue_type_style_index_0_lang-b5fae1fa.js";import{_ as D}from"./BaseTable.vue_vue_type_style_index_0_lang-46fdd41f.js";import H from"./LoanSectionNav-5e9cc305.js";import{_ as u}from"./AppButton.vue_vue_type_script_setup_true_lang-bb509e3b.js";import{_ as b}from"./AppSearch.vue_vue_type_script_setup_true_lang-5f2b06a0.js";import{u as O}from"./useServerSearch-1527cb78.js";import{g as P,a as R}from"./constants-0a903a05.js";import{I as Z}from"./IconMarker-268209a0.js";import{f as q}from"./index-8305cd09.js";import{f}from"./formatMoney-b7ef7683.js";import{_ as F}from"./LoanCard.vue_vue_type_script_setup_true_lang-7913e10f.js";import"./atmosphere-ui-cf0281b4.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-de8b7819.js";import"./PaymentGrid-aea5b371.js";/* empty css                                                                    */import"./mathHelper-b9912ba5.js";import"./exact-math.node-d4a7cd04.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-d05957ec.js";import"./BaseSelect.vue_vue_type_script_setup_true_lang-c8c2da4a.js";/* empty css                                                   */import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-32b3b269.js";import"./usePaymentModal-7f0729f4.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-becaa604.js";import"./close-287af76b.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-a74f0c22.js";import"./clientInteractions-39478df6.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-4fc6099a.js";import"./customCell-8a32bb2a.js";import"./menus-2c7b33a0.js";import"./AppSearchFilters-2dae0cfe.js";const J={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},G=d("path",{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z"},null,-1),K=[G];function Q(r,l){return _(),g("svg",J,K)}const W={name:"mdi-trash",render:Q},X={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Y=d("path",{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"},null,-1),ee=[Y];function te(r,l){return _(),g("svg",X,ee)}const se={name:"mdi-chevron-right",render:te},re=[{name:"client",label:"Cliente",class:"text-left",headerClass:"text-left",render(r){var l;return a("div",{class:"px-4"},[a("div",{class:"flex items-start space-x-2 text-primary font-bold"},[a(Z,{class:"text-primary font-bold mt-1"}),a("span",(l=r.client)==null?void 0:l.fullName)]),a("span",{class:"text-body-1 text-sm"},`${f(r.total)} (${f(r.amount)})`)])}},{name:"first_installment_date",class:"text-center",headerClass:"text-center",label:"Fecha de inicio",render(r){return q(r.first_installment_date)}},{name:"interest_rate",label:"Terminos",class:"text-center",headerClass:"text-center",render(r){return a("div",{class:"space-x-2"},[a("span",r.frequency),a("span",r.interest_rate+" %")])}},{name:"amount_due",label:"Por pagar",class:"text-right",headerClass:"text-right",render(r){return a("div",{class:"space-x-4  flex items-center justify-end"},[a(w,{type:P(r.payment_status)},R(r.payment_status)),a("div",f(r.amount_due))])}},{name:"actions",label:"Acciones",class:"text-center flex my-auto justify-end pr-4",headerClass:"text-center"}],oe={class:"pt-16"},ae={class:"flex"},ne={class:"flex"},Re=N({__name:"Index",props:{loans:null,serverSearchOptions:null},setup(r){const l=r,C=y(()=>Array.isArray(l.loans)?l.loans:l.loans.data),k=async m=>{var c;await j.confirm(`Estas seguro de eliminar el prestamo ${m.id} por ${m.amount} a ${(c=m.client)==null?void 0:c.fullName}?`,"Eliminar prestamo")&&p.delete(route("loans.destroy",m),{onSuccess(){p.reload()}})},{serverSearchOptions:B}=U(l),{state:o,updateSearch:V,executeSearch:h,reset:x}=O(B,m=>{V(`/loans?${m}`)},{manual:!0}),M=E(L),v=y(()=>M.isSmaller("md"));return(m,t)=>{const c=se,S=W;return _(),I(z,{title:"Prestamos"},{header:i(()=>[n(H,null,T({_:2},[e(v)?void 0:{name:"actions",fn:i(()=>[n(b,{modelValue:e(o).search,"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).search=s),modelModifiers:{lazy:!0},filters:e(o).filters,"onUpdate:filters":t[1]||(t[1]=s=>e(o).filters=s),sorts:e(o).sorts,"onUpdate:sorts":t[2]||(t[2]=s=>e(o).sorts=s),class:"w-full hidden md:flex","has-filters":!0,onClear:t[3]||(t[3]=s=>e(x)()),onBlur:e(h)},null,8,["modelValue","filters","sorts","onBlur"]),n(u,{variant:"inverse",onClick:t[4]||(t[4]=s=>e(p).visit("/loans/create"))},{default:i(()=>[$(" Nuevo prestamo ")]),_:1})]),key:"0"}]),1024)]),default:i(()=>[d("main",oe,[d("section",ae,[n(b,{modelValue:e(o).search,"onUpdate:modelValue":t[5]||(t[5]=s=>e(o).search=s),modelModifiers:{lazy:!0},filters:e(o).filters,"onUpdate:filters":t[6]||(t[6]=s=>e(o).filters=s),sorts:e(o).sorts,"onUpdate:sorts":t[7]||(t[7]=s=>e(o).sorts=s),class:"w-full md:flex","has-filters":!0,onClear:t[8]||(t[8]=s=>e(x)()),onBlur:e(h)},null,8,["modelValue","filters","sorts","onBlur"]),n(u,{variant:"inverse",onClick:t[9]||(t[9]=s=>e(p).visit("/loans/create"))},{default:i(()=>[$(" Nuevo prestamo ")]),_:1})]),n(D,{"table-data":e(C),cols:e(re),class:"bg-white rounded-md text-body-1 mt-4",layout:e(v)?"grid":"table"},{actions:i(({scope:{row:s}})=>[d("div",ne,[n(e(A),{class:"relative inline-block px-5 py-2 overflow-hidden font-bold text-body transition rounded-md focus:outline-none hover:bg-opacity-80 min-w-max",href:`/loans/${s.id}`},{default:i(()=>[n(c)]),_:2},1032,["href"]),n(u,{variant:"neutral",class:"hover:text-error transition hover:border-red-400",onClick:le=>k(s)},{default:i(()=>[n(S)]),_:2},1032,["onClick"])])]),card:i(({row:s})=>[n(F,{loan:s},null,8,["loan"])]),_:1},8,["table-data","cols","layout"])])]),_:1})}}});export{Re as default};
