import{L as r}from"./constants-0a903a05.js";import{p as u}from"./index-3624ec38.js";import{f as c}from"./index-c251e33c.js";import{a as h}from"./index-9dc2d84c.js";import{a as p}from"./index-17a9d477.js";import{r as y,t as d}from"./index-81f33ca2.js";import{M as l}from"./mathHelper-95aa3a2b.js";function f(e){y(1,arguments);var t=d(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}const g=(e,t,a=!0)=>{const n={[r.WEEKLY]:{method:h,interval:7},[r.BIWEEKLY]:{method:h,interval:15},[r.SEMIMONTHLY]:{method:M,interval:1},[r.MONTHLY]:{method:p,interval:1}}[t],o=typeof e=="string"?u(e):e,i=n.method(o,n.interval);return a?c(i,"yyyy-MM-dd"):i},M=(e,t)=>e.getDate()==15?f(e):h(e,15);class b{constructor({startDate:t,capital:a,interestMonthlyRate:s,count:n,frequency:o},i=g){this.payments=[],this.totalDebt=0,this.totalInterest=0,this.totalCapital=0,this.startDate=t,this.capital=a,this.interestMonthlyRate=s/100,this.count=n,this.frequency=o,this.nextDateCalculator=i,this.payment=this.calculatePayment(),this.generateAmortizationTable()}calculatePayment(){const t=this.getFrequencyRate();return l.loanPayment({interestRate:t,capital:this.capital,installments:this.count})}getMonthlyPayment(){return this.payment.toFixed(2)}generateAmortizationTable(){let t=0,a=0,s=this.capital,n=this.startDate;const o=this.getFrequencyRate();for(let i=0;i<this.count;i++){t=l.mulWithRounding(s,o),a=l.subWithRounding(this.payment,t);const m=l.subWithRounding(s,a);this.payments.push({number:i+1,due_date:n,days:0,amount:this.payment,amount_paid:0,amount_due:this.payment,interest:t,principal:a,fees:0,late_fee:0,principal_paid:0,interest_paid:0,fees_paid:0,penalty_paid:0,initial_balance:s,final_balance:m}),this.totalCapital+=a,this.totalDebt+=this.payment,this.totalInterest+=t,s=m,n=this.nextDateCalculator(n,this.frequency)}}getInstallment(t){return this.payments[t-1]}getLastPayment(){return this.payments[this.payments.length-1]}getFrequencyRate(){const t={[r.WEEKLY]:4,[r.BIWEEKLY]:2,[r.SEMIMONTHLY]:2,[r.MONTHLY]:1};return this.interestMonthlyRate/t[this.frequency]}}const I=({interest_rate:e,amount:t,repayment_count:a,first_repayment_date:s,frequency:n})=>new b({startDate:s,frequency:n,interestMonthlyRate:e,capital:t,count:a});export{I as a,g};
