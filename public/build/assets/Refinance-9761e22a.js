import{l as L,d as f,r as m,c as M,w as i,u,o as S,b as n,h as $,t as k,E as w}from"./app-494b6f90.js";import{_ as C}from"./AppLayout.vue_vue_type_style_index_0_lang-3aae0800.js";import{_ as R}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{_ as T}from"./LoanSectionNav.vue_vue_type_script_setup_true_lang-185d9b4d.js";import{r as h}from"./createLoan-3d5bbe8e.js";import"./exact-math.node-f7579f9b.js";import{f as p}from"./index-9dc2d84c.js";import{_ as B}from"./LoanForm.vue_vue_type_script_setup_true_lang-afeac10d.js";import"./atmosphere-ui-83e2a306.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-2fd658ef.js";import"./close-40de6817.js";import"./PaymentGrid-a2bc0bdb.js";import"./mathHelper-d6bc48cd.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-93902e28.js";import"./formatMoney-b7ef7683.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-ca2f799a.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-d4cb9813.js";import"./user-outline-c87acd59.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-593db1f8.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-7ced5882.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import"./usePaymentModal-f96f741a.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-ff3d4599.js";import"./menus-f4817d1f.js";import"./index-3624ec38.js";import"./InstallmentTable.vue_vue_type_script_setup_true_lang-d4703ba0.js";import"./sharp-payment-0e03bd0a.js";import"./BaseTable.vue_vue_type_style_index_0_lang-39691f37.js";import"./customCell-9e9ed16f.js";import"./IconMarker-d6248750.js";import"./generateInstallments-e8741370.js";import"./index-17a9d477.js";import"./FormSection.vue_vue_type_script_setup_true_lang-e638d4a6.js";import"./LoanSummary.vue_vue_type_script_setup_true_lang-9ea6e8b2.js";import"./IconCoins-9b99ca67.js";const xt=L({__name:"Refinance",props:{loans:null},setup(l){const a=l,_=f(()=>{var t,o;return(t=a.loans)!=null&&t.id?`Prestamo ${(o=a.loans.client)==null?void 0:o.fullName}`:"Crear Prestamo"}),y=f(()=>{var t;return(t=a.loans)!=null&&t.id?"Guardar prestamo":"Registrar Prestamo"}),d=m(),s=m(!1),r=m(!1),v=t=>{var e,c;const o={...t,date:p(t.disbursement_date,"yyyy-MM-dd"),disbursement_date:p(t.disbursement_date,"yyyy-MM-dd"),first_repayment_date:p(t.first_repayment_date,"y-M-d"),client_id:t.client.id,source_type:(e=t.sourceType)==null?void 0:e.id,source_account_id:(c=t.sourceAccount)==null?void 0:c.id};r.value=!0,h(a.loans.id,o).then(()=>{close(),x()}).catch(g=>{console.log(g)}).finally(()=>{r.value=!1})},b=()=>{d.value.submit()},x=()=>{w.visit("/loans")};return(t,o)=>(S(),M(C,{title:u(_)},{header:i(()=>[n(T,null,{actions:i(()=>[n(R,{variant:"secondary",class:"hidden md:flex",onClick:b,disabled:!s.value},{default:i(()=>[$(k(u(y)),1)]),_:1},8,["disabled"])]),_:1})]),default:i(()=>[n(B,{class:"flex flex-col md:flex-row w-full pb-10 mt-24 md:mt-16 md:space-x-4",ref_key:"loanFormRef",ref:d,loans:l.loans,"is-loading":r.value,"onUpdate:isLoading":o[0]||(o[0]=e=>r.value=e),"can-save":s.value,"onUpdate:canSave":o[1]||(o[1]=e=>s.value=e),onSubmit:v},null,8,["loans","is-loading","can-save"])]),_:1},8,["title"]))}});export{xt as default};
