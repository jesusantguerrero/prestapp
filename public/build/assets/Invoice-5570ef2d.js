import{k as T,z as v,l as U,c as y,w as r,o as u,a as t,b as o,h as b,f as F,j as E,F as k,u as n,an as N,H as p,R as _,E as $}from"./app-de9d56f0.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-5b8fe57e.js";import"./AppLayout.vue_vue_type_style_index_0_lang-1b19aa61.js";import P from"./TaxDefinitionBox-9e2dfc13.js";import{I as S}from"./IconAdd-af7658c2.js";import{_ as R}from"./AppButton.vue_vue_type_script_setup_true_lang-81087974.js";import{N as A,a as j,R as m,V as g,F as x}from"./atmosphere-ui-55a1c253.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-e6300ed2.js";import"./PaymentGrid-aa03ae3b.js";/* empty css                                                                    */import"./mathHelper-c551ea9f.js";import"./exact-math.node-4d03343f.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-a83a84cb.js";import"./formatMoney-b7ef7683.js";import"./BaseSelect.vue_vue_type_script_setup_true_lang-7415b2b5.js";/* empty css                                                   */import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-26f85fd9.js";import"./usePaymentModal-6968ac37.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-ca470652.js";import"./close-69e3a4b1.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-8a48d595.js";import"./clientInteractions-a56251a7.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-de720a79.js";import"./AppSearch.vue_vue_type_script_setup_true_lang-46ceeab7.js";import"./AppSearchFilters-d4c59cd5.js";import"./IconTrash-c81e0abf.js";const L={class:"flex items-center justify-between px-5 border-4 border-white rounded-md"},O=t("div",{class:"flex items-center space-x-2"},null,-1),q={class:"flex overflow-hidden font-bold text-gray-500 rounded-t-lg max-w-min"},z={class:"w-full h-auto px-5 py-10 mx-auto mt-12 space-y-5 bg-white divide-y divide-gray-200 rounded-md sm:px-6 lg:px-8"},H={class:"w-full pb-2"},J=t("h2",{class:"font-bold"}," Comisiones ",-1),G={class:"w-full"},K={class:"md:max-w-sm"},M=t("h2",{class:"my-4 font-bold"}," Preferencias De Pago",-1),Q=t("h2",{class:"my-4 font-bold"}," Titulo de factura ",-1),W=t("p",{class:"mb-2 text-sm text-gray-400 md:w-8/12"},`By default, all Invoices are labelled 'Invoice' followed by a number (e.g., "Invoice 1"). If your local law, language or occupation requires a different name for your invoices, you can set that here.`,-1),X={class:"w-full"},Y=t("h2",{class:"my-4 font-bold"}," Notas e Instrucciones de pago",-1),Fe=T({__name:"Invoice",props:{settingData:{type:Object,default:()=>({invoice_label:"Invoice",invoice_payment_due_days:7,invoice_accept_online_payments:!1,invoice_payment_instructions:"",invoice_email_text:""})},taxes:{type:Array,default:()=>[]}},setup(h){const d=h,l=v({invoice_email_text:"",invoice_payment_instructions:"",invoice_label:"",invoice_payment_due_days:1,...d.settingData,invoice_accept_online_payments:Boolean(d.settingData.invoice_accept_online_payments)}),i=v([...d.taxes]);U(()=>d.taxes,()=>{i.splice(0,i.length,...d.taxes)});const V=()=>{i.push({name:"",rate:0,description:"",type:1,is_default:!1})},w=(s,e)=>{s.id?p({method:"DELETE",url:`/api/taxes/${s.id}`}).then(()=>{i.splice(e,1),_.success({title:"Tax removed",message:"Tax has been removed"})}).catch(()=>{_.error({title:"Error",message:"Could not delete tax"})}):i.splice(e,1)},D=()=>i.length?p.post("/api/taxes",i.filter(s=>s.name&&s.rate)).then(s=>{console.log(s)}).catch(s=>{console.log(s)}):new Promise(s=>s(!0)),I=()=>p({url:"/api/settings",method:"POST",data:l}),C=()=>{Promise.allSettled([D(),I()]).then(()=>{$.reload({preserveScroll:!0}),_({title:"Invoicing Data Updated",message:"Invoicing settings has being updated",type:"success"})})};return(s,e)=>(u(),y(B,{title:"Configuracion / Facturas"},{header:r(()=>[t("div",L,[O,t("div",q,[o(R,{variant:"inverse",onClick:e[0]||(e[0]=a=>C()),class:"w-32"},{default:r(()=>[b(" Save ")]),_:1})])])]),default:r(()=>[t("main",z,[t("article",H,[J,(u(!0),F(k,null,E(i,(a,c)=>(u(),y(P,{key:`taxt-${c}`,class:"w-full",modelValue:i[c],"onUpdate:modelValue":f=>i[c]=f,onRemove:f=>w(a,c)},null,8,["modelValue","onUpdate:modelValue","onRemove"]))),128)),o(n(A),{onClick:V,rounded:"",class:"flex items-center mt-2 text-gray-400 border cursor-pointer hover:bg-gray-100"},{default:r(()=>[o(S,{class:"w-4 h-4 mr-2"}),b(" Agregar Comision ")]),_:1})]),t("article",G,[t("div",K,[M,o(n(m),{class:"",label:"Limite De Pago"},{default:r(()=>[o(n(j),{modelValue:l.invoice_payment_due_days,"onUpdate:modelValue":e[1]||(e[1]=a=>l.invoice_payment_due_days=a),options:[{name:1,label:"Uppon receipt"},{name:7,label:"7 Days"},{name:15,label:"15 Days"},{name:30,label:"30 Days"},{name:45,label:"45 Days"}]},null,8,["modelValue"])]),_:1}),o(n(m),{class:"mt-5",label:"Aceptar pagos online"},{default:r(()=>[o(n(N),{modelValue:l.invoice_accept_online_payments,"onUpdate:modelValue":e[2]||(e[2]=a=>l.invoice_accept_online_payments=a)},null,8,["modelValue"])]),_:1})])]),t("article",null,[Q,W,o(n(m),{class:"md:max-w-sm",label:"Factura",rounded:""},{default:r(()=>[o(n(g),{modelValue:l.invoice_label,"onUpdate:modelValue":e[3]||(e[3]=a=>l.invoice_label=a),placeholder:"Factura",rounded:""},null,8,["modelValue"])]),_:1}),o(n(m),{class:"md:max-w-sm",label:"Factura Compra",rounded:""},{default:r(()=>[o(n(g),{modelValue:l.invoice_label,"onUpdate:modelValue":e[4]||(e[4]=a=>l.invoice_label=a),placeholder:"Factura Compra",rounded:""},null,8,["modelValue"])]),_:1})]),t("article",X,[Y,o(n(x),{modelValue:l.invoice_payment_instructions,"onUpdate:modelValue":e[5]||(e[5]=a=>l.invoice_payment_instructions=a),class:"border rounded-md"},null,8,["modelValue"])]),t("article",null,[o(n(m),{class:"w-full",label:"Texto de email"},{default:r(()=>[o(n(x),{modelValue:l.invoice_email_text,"onUpdate:modelValue":e[6]||(e[6]=a=>l.invoice_email_text=a),class:"border rounded-md"},null,8,["modelValue"])]),_:1})])])]),_:1}))}});export{Fe as default};
