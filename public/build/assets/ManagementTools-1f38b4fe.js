import{_ as j}from"./trash-d9527c99.js";import{_ as N}from"./file-b6d9b4b3.js";import{_ as D}from"./sharp-payment-0e03bd0a.js";import{_ as B}from"./chevron-right-182a2a80.js";import{t as _}from"./atmosphere-ui-83e2a306.js";import{l as F,d as T,z as S,m as z,r as E,c as v,w as i,C as O,o as u,b as a,a as c,u as r,g as y,h as U,f as A,E as L,N as G}from"./app-494b6f90.js";import{_ as b}from"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import{_ as R}from"./AppLayout.vue_vue_type_style_index_0_lang-3aae0800.js";import{_ as q}from"./InvoiceTable.vue_vue_type_script_setup_true_lang-7b3dfab1.js";import{_ as J}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-d424aeb5.js";import{f as x}from"./formatMoney-b7ef7683.js";import{_ as d}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{u as H}from"./usePaymentModal-f96f741a.js";import{u as K}from"./usePrint-7af28820.js";import Q from"./Simple-bfa55d68.js";import{_ as W}from"./ButtonGroup.vue_vue_type_script_setup_true_lang-f813575d.js";import{a as X}from"./BaseTable.vue_vue_type_style_index_0_lang-39691f37.js";import{I as Y,a as Z}from"./ClientForm.vue_vue_type_script_setup_true_lang-7ced5882.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-2fd658ef.js";import"./close-40de6817.js";import"./PaymentGrid-a2bc0bdb.js";import"./mathHelper-d6bc48cd.js";import"./exact-math.node-f7579f9b.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-93902e28.js";import"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-ca2f799a.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-d4cb9813.js";import"./user-outline-c87acd59.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-593db1f8.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-ff3d4599.js";import"./constants-a62dae4c.js";import"./index-9dc2d84c.js";import"./index-3624ec38.js";import"./menus-f4817d1f.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import"./index-1a0c9adf.js";import"./InvoiceTotals.vue_vue_type_style_index_0_lang-fb964559.js";import"./InvoiceGrid-4cf1b47f.js";import"./IconTrash-bc17a3dd.js";import"./AtTable.vue_vue_type_script_setup_true_lang-3e9914f8.js";import"./customCell-9e9ed16f.js";import"./ClientCard.vue_vue_type_script_setup_true_lang-6e29d606.js";import"./BusinessCard.vue_vue_type_script_setup_true_lang-7e0ded8d.js";import"./index-4b317f4f.js";const te={class:"py-10 mx-auto sm:px-6 lg:px-8"},oe={class:"flex space-x-4"},ae={class:"flex space-x-4 mt-4"},ne={class:"flex justify-end items-center space-x-2s"},se={class:"flex space-x-2"},ie={key:0,id:"invoice-content"},re=F({__name:"ManagementTools",props:{invoices:{type:Array},type:{type:String},outstanding:{type:Number},paid:{type:Number},lateDays:{type:Number},properties:{type:Array,default(){return[]}},owners:{type:Array,default(){return[]}},businessData:{type:Object,required:!0},user:{type:Object}},setup(s){const h=s;T(()=>{var e;return`${(e=h.type)==null?void 0:e.toLowerCase()}s`});const n=S({owner:null,property:null,section:"bills"});z(()=>n,()=>{const e=Object.entries(n).reduce((o,[p,l])=>(o[p]=(l==null?void 0:l.value)??l,o),{});L.get(location.pathname,{filters:e},{preserveState:!0})},{deep:!0});function le(e){}const{openModal:g}=H(),k=e=>{const o={...e,amount:parseFloat(e.debt)||e.total,id:void 0,invoice_id:e.id};G(()=>{g({data:{title:`Pagar ${e.concept}`,payment:o,endpoint:`/owners/${e.client_id}/draws/${e==null?void 0:e.id}/payments`,due:o==null?void 0:o.amount,defaultConcept:"Pago de "+e.concept,accountsEndpoint:"/invoices"}})})},m=E(null),{customPrint:C}=K();function $(e){axios.get(`/invoices/${e.id}/preview?json=true`).then(({data:o})=>{m.value=o,C("invoice-content",{beforePrint(){m.value=null},delay:200})})}const V=()=>{},w={commissions:{label:"Comisiones"},invoices:{label:"Facturas"},bills:{label:"Gastos"}};return(e,o)=>{const p=B,l=O("Link"),I=D,M=N,P=j;return u(),v(R,{title:"Centro de pago"},{header:i(()=>[a(J)]),default:i(()=>[c("div",te,[c("section",oe,[a(r(_),{class:"w-full bg-white border h-28 text-body-1",title:"Pagado",value:r(x)(s.paid??0)},null,8,["value"]),a(r(_),{class:"w-full bg-white border h-28 text-body-1",title:"Balance de Pendiente",value:r(x)(s.outstanding??0)},null,8,["value"]),a(r(_),{class:"w-full bg-white border h-28 text-body-1",title:"Dias de mora",value:s.lateDays||0},null,8,["value"])]),c("section",ae,[a(X,{modelValue:n.search,"onUpdate:modelValue":o[0]||(o[0]=t=>n.search=t),modelModifiers:{lazy:!0},class:"w-full md:flex","has-filters":!0},null,8,["modelValue"]),a(b,{class:"min-w-max",size:e.large,options:s.owners,placeholder:"Filtrar por dueÃ±o",modelValue:n.owner,"onUpdate:modelValue":o[1]||(o[1]=t=>n.owner=t)},null,8,["size","options","modelValue"]),a(b,{placeholder:"Filtrar",options:[],modelValue:n.status,"onUpdate:modelValue":o[2]||(o[2]=t=>n.status=t),label:"label","track-by":"name"},null,8,["modelValue"]),a(W,{class:"w-full md:w-fit","onUpdate:modelValue":[V,o[3]||(o[3]=t=>n.section=t)],values:w,modelValue:n.section},null,8,["modelValue"])]),a(r(q),{"invoice-data":s.invoices,class:"mt-10 rounded-md bg-base-lvl-3"},{actions:i(({row:t})=>[c("div",ne,[a(l,{class:"relative inline-block cursor-pointer ml-4 hover:bg-primary hover:text-white px-5 py-2 overflow-hidden font-bold text-body transition rounded-md focus:outline-none hover:bg-opacity-80 min-w-max",href:`/properties/${t.property_id}?unit=${t.id}`},{default:i(()=>[a(p)]),_:2},1032,["href"]),(t==null?void 0:t.status)!=="paid"?(u(),v(d,{key:0,onClick:f=>k(t),variant:"inverse-secondary",class:"flex items-center justify-center"},{default:i(()=>[a(I)]),_:2},1032,["onClick"])):y("",!0),c("div",se,[a(d,{class:"hover:text-primary transition items-center flex flex-col justify-center hover:border-primary-400",variant:"neutral",onClick:f=>$(t)},{default:i(()=>[a(M)]),_:2},1032,["onClick"]),n.section=="bills"&&t.status!="paid"?(u(),v(d,{key:0,class:"mr-2",variant:"neutral",process:r(Y).isGeneratingDistribution,onClick:f=>r(Z).generateOwnerDistribution(t.contact_id,t.id)},{default:i(()=>[U(" Re-generar ")]),_:2},1032,["process","onClick"])):y("",!0)]),a(d,{variant:"neutral",class:"hover:text-error transition items-center flex flex-col justify-center hover:border-red-400",onClick:f=>void 0},{default:i(()=>[a(P)]),_:2},1032,["onClick"])])]),_:1},8,["invoice-data"])]),m.value?(u(),A("div",ie,[a(Q,{user:s.user,type:s.type,"business-data":m.value.businessData,"invoice-data":m.value.invoice},null,8,["user","type","business-data","invoice-data"])])):y("",!0)]),_:1})}}});const at=ee(re,[["__scopeId","data-v-916cd7c0"]]);export{at as default};
