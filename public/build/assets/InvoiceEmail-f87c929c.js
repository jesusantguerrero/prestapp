import{c as n,w as a,C as p,o as l,a as e,e as c,W as m,b as h,h as d}from"./app-de9d56f0.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const v={props:{isVisible:Object,invoice:[Object,null],endpoint:{type:String,required:!0}},data(){return{formData:{attach_pdf:!1,message:"HI",recipients:["jesusant.guerrero@gmail.com"],subject:"Invoice #1 from InCode"}}},watch:{invoice:{handler(s){s&&s.client&&(this.formData.recipients=[s.client.email])},deep:!0,immediate:!0}},methods:{sendEmail(){if(!this.formData.recipients[0]){this.$notify({type:"error",message:"should specify a recipient"});return}const s={...this.formData};this.$http.post(this.endpoint,s).then(()=>{this.$emit("sent"),this.resetForm(!0)}).catch(t=>{this.$notify({type:"error",message:t.response?t.response.data.status.message:"Ha ocurrido un error"})})},resetForm(s){this.formData={attach_pdf:!1,message:"",recipients:[""],subject:""},s&&(this.isVisible.value=!1)}}},g={class:""},D={class:"row"},y={class:"col-md-12 text-left"},j={class:"invoice-form-row form-group"},x=e("label",{for:"recipient"},"To: ",-1),C={class:"col-md-12 text-left"},V={class:"invoice-form-row form-group"},k=e("label",{for:"subject"},"Subject: ",-1),w={class:"col-md-12 text-left"},E={class:"invoide-form-row form-group"},I=e("label",{for:""},"Message",-1),S={slot:"footer",class:"dialog-footer"};function B(s,t,f,N,o,u){const r=p("el-button"),_=p("el-dialog");return l(),n(_,{title:"Send Email",visible:f.isVisible.value},{default:a(()=>[e("div",g,[e("div",D,[e("div",y,[e("div",j,[x,c(e("input",{type:"text",class:"form-control",name:"recipient",id:"recipient","onUpdate:modelValue":t[0]||(t[0]=i=>o.formData.recipients[0]=i)},null,512),[[m,o.formData.recipients[0]]])])]),e("div",C,[e("div",V,[k,c(e("input",{type:"text",class:"form-control",name:"subject",id:"subject","onUpdate:modelValue":t[1]||(t[1]=i=>o.formData.subject=i)},null,512),[[m,o.formData.subject]])])]),e("div",w,[e("div",E,[I,c(e("textarea",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=i=>o.formData.message=i),cols:"3",rows:"3"},`\r
            `,512),[[m,o.formData.message]])])])])]),e("span",S,[h(r,{class:"danger",onClick:t[3]||(t[3]=i=>f.isVisible.value=!1)},{default:a(()=>[d("Cancel")]),_:1}),o.formData.id?(l(),n(r,{key:0,type:"primary",onClick:s.deletePayment},{default:a(()=>[d("Delete")]),_:1},8,["onClick"])):(l(),n(r,{key:1,type:"success",onClick:u.sendEmail},{default:a(()=>[d("Send Email")]),_:1},8,["onClick"]))])]),_:1},8,["visible"])}const F=b(v,[["render",B]]);export{F as default};
