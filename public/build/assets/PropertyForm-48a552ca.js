import{o as _,f as b,a as r,l as q,P as H,m as z,c as C,w as n,b as o,a1 as A,u as l,h,E as g,g as U,F as B,j as E}from"./app-e7293397.js";import{_ as L,a as P,b as D}from"./sharp-photo-size-select-small-adcc5618.js";import{F as v,z as G,W}from"./atmosphere-ui-86b7f8ed.js";import{_ as J}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import{_ as O}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-516e104c.js";import{_ as I}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{p as R}from"./constants-fbb1b618.js";import{_ as N}from"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import{_ as p}from"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import{_ as Z}from"./AppSectionHeader.vue_vue_type_script_setup_true_lang-4f8015fe.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./exact-math.node-9a256fc0.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./formatMoney-b7ef7683.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./user-outline-dcfa7b13.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./constants-22f9a1fe.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./menus-f4817d1f.js";const K={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Q=r("path",{fill:"currentColor",d:"M19 13H5v-2h14v2Z"},null,-1),X=[Q];function Y(c,m){return _(),b("svg",K,X)}const ee={name:"mdi-minus",render:Y},oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},te=r("path",{fill:"currentColor",d:"M17 3H5c-1.1 0-2 .9-2 2v14a2 2 0 0 0 2 2h6.81c-.39-.66-.64-1.4-.74-2.16a2.994 2.994 0 0 1-1.87-3.81C9.61 13.83 10.73 13 12 13c.44 0 .88.1 1.28.29c2.29-1.79 5.55-1.7 7.72.25V7l-4-4m-2 6H5V5h10v4m.75 12L13 18l1.16-1.16l1.59 1.59l3.59-3.59l1.16 1.41L15.75 21"},null,-1),se=[te];function le(c,m){return _(),b("svg",oe,se)}const ne={name:"mdi-content-save-check",render:le},re={class:"flex justify-end space-x-2"},ae={class:"mx-auto pt-5 mt-8 text-gray-500 sm:px-6 lg:px-8"},ie={class:"flex space-x-2"},de={class:"w-full px-5 py-4 space-y-4 text-gray-600 bg-white rounded-md shadow-md"},pe={class:"flex space-x-5"},ce={class:"md:flex md:space-x-2 space-y-4"},me={class:""},ue={class:"flex space-x-4 items-center justify-between"},_e={class:"grid grid-cols-4 gap-4 w-full"},fe={class:"inline-blocks h-full flex items-center px-2"},he={class:"inline-blocks h-full flex items-center px-2"},be={class:"inline-blocks h-full flex items-center px-2"},xe=["onClick"],we=r("i",{class:"mr-2 fa fa-plus-circle"},null,-1),Qe=q({__name:"PropertyForm",props:["properties","clients"],setup(c){const m=c,s=H({name:"",description:"",owner:null,owner_id:"",address:"",property_type:"",price:0,units:[{price:0,description:""}]});z(()=>m.properties,a=>{a&&F(a,s)},{immediate:!0,deep:!0});function F(a,e){Object.keys(e).forEach(i=>{e[i]=a[i]||e[i],i=="owner_id"&&(e.owner=m.clients.find(u=>(u==null?void 0:u.id)==e.owner_id))})}const y=()=>{var u;const a=(u=m.properties)==null?void 0:u.id,e=a?"put":"post",i=a?`/${m.properties.id}`:"";s.transform(x=>{var w;return{...x,owner_id:(w=x.owner)==null?void 0:w.id}})[e](`/properties${i}`,{onsuccess(){route.visit(route("properties"))}})},j=()=>{const a=s.units.length+1;s.units.push({index:a,description:"",price:0})},M=a=>{s.units.length+1,s.units=s.units.filter((e,i)=>i!==a)},k=()=>m.properties.id?g.visit(`/properties/${m.properties.id}`):g.visit("/properties/");return(a,e)=>{const i=ne,u=L,x=P,w=D,S=ee;return _(),C(J,{title:"Agregar propiedad"},{header:n(()=>{var f;return[o(O,null,A({_:2},[(f=c.properties)!=null&&f.id?void 0:{name:"actions",fn:n(()=>[r("section",re,[o(l(v),{class:"font-bold text-red-400 bg-gray-100 rounded-md",variant:"secondary",onClick:e[0]||(e[0]=V=>k())},{default:n(()=>[h(" Cancelar ")]),_:1}),o(I,{variant:"inverse",onClick:y},{default:n(()=>[h(" Guardar propiedad ")]),_:1})])]),key:"0"}]),1024)]}),default:n(()=>{var f,V,$;return[r("main",ae,[(f=c.properties)!=null&&f.id?(_(),C(Z,{key:0,name:"",class:"px-5 border-2 border-white rounded-md rounded-b-none shadow-md",resource:c.properties,title:(V=c.properties)==null?void 0:V.name,onCreate:e[2]||(e[2]=t=>l(g).visit("/properties/create")),"hide-action":""},{actions:n(()=>[r("section",ie,[o(l(v),{class:"font-bold text-red-400 bg-gray-100 rounded-md",variant:"secondary",onClick:e[1]||(e[1]=t=>k())},{default:n(()=>[h(" Cancelar ")]),_:1}),o(I,{variant:"secondary",onClick:y},{default:n(()=>[o(i,{class:"ml-2"}),h(" Guardar propiedad ")]),_:1})])]),_:1},8,["resource","title"])):U("",!0),r("div",de,[r("div",pe,[o(p,{label:"Dirección",modelValue:l(s).address,"onUpdate:modelValue":e[3]||(e[3]=t=>l(s).address=t),class:"w-full border-b focus:outline-none",placeholder:"Dirección",rounded:"",required:""},null,8,["modelValue"]),o(p,{class:"w-4/12",label:"Dueño de propiedad",required:""},{default:n(()=>[o(N,{modelValue:l(s).owner,"onUpdate:modelValue":e[4]||(e[4]=t=>l(s).owner=t),endpoint:"/api/clients?filter[is_owner]=1",placeholder:"Selecciona un dueño",label:"display_name","track-by":"id"},null,8,["modelValue"])]),_:1})]),r("div",ce,[o(p,{label:"Nombre de propiedad",modelValue:l(s).name,"onUpdate:modelValue":e[5]||(e[5]=t=>l(s).name=t),class:"w-full",placeholder:"Nombre de propiedad",rounded:""},null,8,["modelValue"]),o(p,{class:"w-full",label:"Tipo de propiedad",required:""},{default:n(()=>[o(N,{modelValue:l(s).type,"onUpdate:modelValue":[e[6]||(e[6]=t=>l(s).type=t),e[7]||(e[7]=t=>l(s).property_type=t.name)],options:l(R),placeholder:"Selecciona un tipo",label:"label","track-by":"name"},null,8,["modelValue","options"])]),_:1})]),($=c.properties)!=null&&$.id?U("",!0):(_(),b(B,{key:0},[(_(!0),b(B,null,E(l(s).units,(t,T)=>(_(),b("section",me,[r("header",ue,[r("section",_e,[o(p,{class:"w-full",label:"Precio de Renta",required:""},{default:n(()=>[o(l(G),{modelValue:t.price,"onUpdate:modelValue":d=>t.price=d,class:"w-full",rounded:"","number-format":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(p,{class:"w-full",label:"Area",modelValue:t.area,"onUpdate:modelValue":d=>t.area=d,rounded:""},{prefix:n(()=>[r("span",fe,[o(u)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(p,{class:"w-full",label:"Habitaciones",modelValue:t.bedrooms,"onUpdate:modelValue":d=>t.bedrooms=d,rounded:""},{prefix:n(()=>[r("span",he,[o(x)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(p,{class:"w-full",label:"Baños",modelValue:t.bathrooms,"onUpdate:modelValue":d=>t.bathrooms=d,rounded:"",placeholder:"0"},{prefix:n(()=>[r("span",be,[o(w)])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),r("button",{class:"bg-error/60 mt-4 justify-center flex text-white items-center h-8 w-8 rounded-full",onClick:d=>M(T)},[o(S)],8,xe)]),o(p,{label:"Notas/Detalles"},{default:n(()=>[o(l(W),{modelValue:t.description,"onUpdate:modelValue":d=>t.description=d,class:"w-full p-2 border focus:outline-none",placeholder:"Descripcion de la propiedad"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),256)),o(l(v),{class:"text-primary hover:font-bold",onClick:e[8]||(e[8]=t=>j())},{default:n(()=>[we,h(" Agregar unidad ")]),_:1})],64))])])]}),_:1})}}});export{Qe as default};
