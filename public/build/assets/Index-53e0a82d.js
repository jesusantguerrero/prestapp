import{_ as I,B as S,a as T}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import{_ as D}from"./document-aa315096.js";import{l as E,d as g,B as R,z as U,c as m,w as a,u as e,o as n,E as c,h as p,g as f,b as s,t as q,a as _,f as k}from"./app-e7293397.js";import{_ as F}from"./ClientsTable.vue_vue_type_script_setup_true_lang-91f31dd5.js";import{_ as J}from"./LoanSectionNav.vue_vue_type_script_setup_true_lang-6869f5ef.js";import{_ as j}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-516e104c.js";import{_ as d}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{a as G}from"./user-outline-dcfa7b13.js";import{c as C}from"./constants-22f9a1fe.js";import{u as H}from"./useServerSearch-037538e8.js";import{u as K,a as L}from"./BaseTable.vue_vue_type_style_index_0_lang-efd97e4a.js";import{_ as Q}from"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import"./atmosphere-ui-86b7f8ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./exact-math.node-9a256fc0.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./formatMoney-b7ef7683.js";import"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./trash-b41c2bba.js";import"./file-8bfe57ae.js";import"./chevron-right-5280f715.js";import"./ClientCard.vue_vue_type_script_setup_true_lang-a6acaa8d.js";import"./ClientProfile-1c1716f3.js";import"./constants-fbb1b618.js";import"./IconMarker-562faee5.js";import"./UnitTitle.vue_vue_type_script_setup_true_lang-c25f773c.js";import"./menus-f4817d1f.js";import"./index-9dc2d84c.js";import"./index-3624ec38.js";import"./customCell-f0a6687f.js";const W={class:"mt-16"},X={class:"flex space-x-4"},Y={key:0,class:"flex space-x-2"},Z={key:1},tt={key:0,class:"fixed bottom-16 right-5 flex space-x-2"},Gt=E({__name:"Index",props:{clients:null,type:null,serverSearchOptions:{default:()=>({filters:{},dates:{},sorts:"",limit:10,relationships:"",search:"",page:1})}},setup(i){const l=i,x=g(()=>Array.isArray(l.clients)?l.clients:l.clients.data),V=g(()=>!Array.isArray(l.clients)&&l.clients.total),{toggleModal:y}=G("contact"),w=g(()=>({owner:"Propietarios",tenant:"Inquilinos",lender:"Clientes de prestamos"})[l.type]??"Clientes"),{serverSearchOptions:B}=R(l),{executeSearch:v,updateSearch:b,changeSize:h,paginate:A,reset:z,state:u}=H(B,r=>{b(`/contacts/${l.type}?${r}`)},{manual:!0}),{isMobile:M}=K(),$=U({status:C.find(r=>r.name===u.filters.status)??C[0]}),N=r=>{u.filters.status=r.name,v()};return(r,t)=>{const P=D,O=T;return n(),m(I,{title:e(w)},{header:a(()=>[i.type=="lender"?(n(),m(J,{key:0})):(n(),m(j,{key:1},{actions:a(()=>[i.type=="owner"?(n(),m(d,{key:0,variant:"inverse",onClick:t[0]||(t[0]=o=>e(c).visit(r.route("properties.create")))},{default:a(()=>[p(" Agregar Propiedad ")]),_:1})):f("",!0),i.type=="owner"?(n(),m(d,{key:1,variant:"inverse",onClick:t[1]||(t[1]=o=>e(c).visit(r.route("owners.draw")))},{default:a(()=>[p(" Pagar distribucion ")]),_:1})):(n(),m(d,{key:2,variant:"inverse-secondary",onClick:t[2]||(t[2]=o=>e(c).visit(r.route("properties.create")))},{default:a(()=>[p(" Agregar Contrato ")]),_:1})),s(d,{variant:"secondary",onClick:t[3]||(t[3]=o=>e(y)({data:{type:i.type},isOpen:!0}))},{default:a(()=>[p(" Agregar "+q(i.type),1)]),_:1})]),_:1}))]),default:a(()=>[_("main",W,[_("section",X,[s(L,{modelValue:e(u).search,"onUpdate:modelValue":t[4]||(t[4]=o=>e(u).search=o),modelModifiers:{lazy:!0},class:"w-full md:flex","has-filters":!0,onClear:t[5]||(t[5]=o=>e(z)()),onBlur:e(v)},null,8,["modelValue","onBlur"]),i.type=="lender"?(n(),k("article",Y,[s(d,{variant:"inverse-secondary",class:"hidden md:flex",onClick:t[6]||(t[6]=o=>e(c).visit("/loans/create"))},{default:a(()=>[p(" Nuevo prestamo ")]),_:1}),s(d,{variant:"secondary",class:"hidden md:flex",onClick:t[7]||(t[7]=o=>e(y)({data:{type:i.type},isOpen:!0}))},{default:a(()=>[p(" Nuevo cliente ")]),_:1})])):f("",!0),i.type=="tenant"?(n(),k("article",Z,[s(Q,{placeholder:"Filtrar",options:e(C),modelValue:$.status,"onUpdate:modelValue":[t[8]||(t[8]=o=>$.status=o),N],label:"label","track-by":"name",size:"large"},null,8,["options","modelValue"])])):f("",!0)]),s(F,{class:"bg-white rounded-md",clients:e(x),pagination:e(u),total:e(V),onSearch:e(v),onPaginate:e(A),onSizeChange:e(h)},null,8,["clients","pagination","total","onSearch","onPaginate","onSizeChange"]),e(M)?(n(),k("div",tt,[s(S,{onClick:t[9]||(t[9]=o=>e(c).visit("/loans/create"))},{default:a(()=>[s(P)]),_:1}),s(S,{onClick:t[10]||(t[10]=o=>e(y)({data:{type:i.type},isOpen:!0}))},{default:a(()=>[s(O)]),_:1})])):f("",!0)])]),_:1},8,["title"])}}});export{Gt as default};
