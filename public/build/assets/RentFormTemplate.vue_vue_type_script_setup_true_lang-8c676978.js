import{T as P,c as m}from"./atmosphere-ui-86b7f8ed.js";import{_ as w}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{_ as U}from"./RentFormPersonal.vue_vue_type_script_setup_true_lang-ce48733b.js";import{_ as V}from"./RentFormProperty.vue_vue_type_script_setup_true_lang-cb886159.js";import{_ as N}from"./RentFormContract.vue_vue_type_script_setup_true_lang-8d52b704.js";import{_ as O}from"./RentFormFees.vue_vue_type_script_setup_true_lang-97de9a80.js";import{f as D,d as f}from"./index-9dc2d84c.js";import{a as y}from"./index-17a9d477.js";import{p as S}from"./index-3624ec38.js";import{l as j,z as F,m as p,r as E,d as I,c as L,w as s,u as l,o as q,a as z,b as o,h as k,t as A}from"./app-e7293397.js";const G={class:"flex justify-end space-x-2 mt-auto md:mt-16 md:px-32"},te=j({__name:"RentFormTemplate",props:{data:null,isProcessing:{type:Boolean},client:null,unit:null,property:null},emits:["submit"],setup(u,{emit:C}){var v,h,g,b,x;const i=u,e=F({id:null,property_id:(v=i.property)==null?void 0:v.id,property:i.property,unit_id:(h=i.unit)==null?void 0:h.id,unit:i.unit,is_new_client:!1,client_id:(g=i.client)==null?void 0:g.id,client:i.client,client_name:"",date:new Date,deposit:(b=i.unit)==null?void 0:b.price,deposit_due:new Date,deposit_reference:"",payment_account_id:null,payment_method:"",amount:(x=i.unit)==null?void 0:x.price,first_invoice_date:y(new Date,1),next_invoice_date:y(new Date,1),end_date:null,frequency:"MONTHLY",commission:10,commission_type:"",late_fee:10,late_fee_type:"",grace_days:0,additional_fees:[]});p(()=>e.unit,t=>{t&&(e.amount=t.price)}),p(()=>e.deposit_due,t=>{e.date=t},{immediate:!0}),p(()=>e.date,t=>{e.first_invoice_date=y(t,1)},{immediate:!0}),p(()=>i.data,t=>{t&&Object.keys(e).forEach(a=>{var n,r;(n=t[a])!=null&&n.split&&((r=t[a])==null?void 0:r.split("-").length)==3?e[a]=S(t[a]):t&&(e[a]=t[a])})},{deep:!0,immediate:!0});const T=[{handle:()=>e.client||e.client_name},{handle:()=>e.property&&e.unit},{handle:()=>e.deposit&&e.amount}],_=()=>new Promise(t=>{var a;return t(!((a=T[d.value])!=null&&a.handle()))}),d=E(0),$=I(()=>["Datos de propiedad","Datos de renta","Cargo y Moras","Guardar"][d.value]),c=t=>{Object.keys(e).forEach(a=>{t[a]&&(e[a]=t[a])})},B=()=>{var a,n,r;const t={...e,deposit_due:D(e.deposit_due,"y-M-d"),date:D(e.date,"yyyy-MM-dd"),first_invoice_date:f(e.first_invoice_date),next_invoice_date:f(e.next_invoice_date),end_date:f(e.end_date),unit_id:(a=e.unit)==null?void 0:a.id,property_id:(n=e.property)==null?void 0:n.id,client_id:(r=e.client)==null?void 0:r.id};delete t.property,delete t.client,delete t.unit,C("submit",t)};return(t,a)=>(q(),L(l(P),{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=n=>d.value=n),"finish-status":"success",simple:"",style:{"margin-top":"20px"},"active-class":"bg-primary text-white","circle-active-color":"bg-primary text-white","load-shadow-color":"shadow-primary",onFinished:B},{footer:s(({prev:n,next:r})=>[z("footer",G,[o(w,{variant:"neutral",onClick:M=>n(),class:"w-full md:w-fit"},{default:s(()=>[k("Atras")]),_:2},1032,["onClick"]),o(w,{variant:"inverse",rounded:"",class:"w-full md:w-fit",processing:u.isProcessing,disabled:u.isProcessing,onClick:M=>r()},{default:s(()=>[k(A(l($)),1)]),_:2},1032,["processing","disabled","onClick"])])]),default:s(()=>[o(l(m),{name:"personal",title:"Datos Personales","before-change":_},{default:s(()=>[o(U,{"model-value":e,"onUpdate:modelValue":c},null,8,["model-value"])]),_:1}),o(l(m),{name:"property",title:"Propiedad","before-change":_},{default:s(()=>[o(V,{"model-value":e,"onUpdate:modelValue":c},null,8,["model-value"])]),_:1}),o(l(m),{name:"rent_details",title:"Detalles de renta","before-change":_},{default:s(()=>[o(N,{"model-value":e,"onUpdate:modelValue":c},null,8,["model-value"])]),_:1}),o(l(m),{name:"fees",title:"Cargos y mora"},{default:s(()=>[o(O,{"model-value":e,"onUpdate:modelValue":c},null,8,["model-value"])]),_:1})]),_:1},8,["modelValue"]))}});export{te as _};
