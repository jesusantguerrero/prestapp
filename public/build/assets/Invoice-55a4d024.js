import{l as T,z as v,m as U,c as y,w as r,o as u,a as t,b as o,h as b,f as F,j as k,F as E,u as n,am as $,a3 as p,M as _,E as B}from"./app-494b6f90.js";import{_ as P}from"./AppLayout.vue_vue_type_style_index_0_lang-3aae0800.js";import S from"./TaxDefinitionBox-d027382c.js";import{I as N}from"./IconAdd-2ac6ed7c.js";import{_ as A}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{F as j,s as z,k as m,z as g,W as x}from"./atmosphere-ui-83e2a306.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-2fd658ef.js";import"./close-40de6817.js";import"./PaymentGrid-a2bc0bdb.js";import"./mathHelper-d6bc48cd.js";import"./exact-math.node-f7579f9b.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-93902e28.js";import"./formatMoney-b7ef7683.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-ca2f799a.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-d4cb9813.js";import"./user-outline-c87acd59.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-593db1f8.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-7ced5882.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import"./usePaymentModal-f96f741a.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-ff3d4599.js";import"./IconTrash-bc17a3dd.js";const L={class:"flex items-center justify-between px-5 border-4 border-white rounded-md"},O=t("div",{class:"flex items-center space-x-2"},null,-1),R={class:"flex overflow-hidden font-bold text-gray-500 rounded-t-lg max-w-min"},W={class:"w-full h-auto px-5 py-10 mx-auto mt-12 space-y-5 bg-white divide-y divide-gray-200 rounded-md sm:px-6 lg:px-8"},q={class:"w-full pb-2"},J=t("h2",{class:"font-bold"}," Comisiones ",-1),M={class:"w-full"},G={class:"md:max-w-sm"},H=t("h2",{class:"my-4 font-bold"}," Preferencias De Pago",-1),K=t("h2",{class:"my-4 font-bold"}," Titulo de factura ",-1),Q=t("p",{class:"mb-2 text-sm text-gray-400 md:w-8/12"},`By default, all Invoices are labelled 'Invoice' followed by a number (e.g., "Invoice 1"). If your local law, language or occupation requires a different name for your invoices, you can set that here.`,-1),X={class:"w-full"},Y=t("h2",{class:"my-4 font-bold"}," Notas e Instrucciones de pago",-1),Te=T({__name:"Invoice",props:{settingData:{type:Object,default:()=>({invoice_label:"Invoice",invoice_payment_due_days:7,invoice_accept_online_payments:!1,invoice_payment_instructions:"",invoice_email_text:""})},taxes:{type:Array,default:()=>[]}},setup(h){const d=h,l=v({invoice_email_text:"",invoice_payment_instructions:"",invoice_label:"",invoice_payment_due_days:1,...d.settingData,invoice_accept_online_payments:Boolean(d.settingData.invoice_accept_online_payments)}),i=v([...d.taxes]);U(()=>d.taxes,()=>{i.splice(0,i.length,...d.taxes)});const V=()=>{i.push({name:"",rate:0,description:"",type:1,is_default:!1})},w=(s,e)=>{s.id?p({method:"DELETE",url:`/api/taxes/${s.id}`}).then(()=>{i.splice(e,1),_.success({title:"Tax removed",message:"Tax has been removed"})}).catch(()=>{_.error({title:"Error",message:"Could not delete tax"})}):i.splice(e,1)},D=()=>i.length?p.post("/api/taxes",i.filter(s=>s.name&&s.rate)).then(s=>{console.log(s)}).catch(s=>{console.log(s)}):new Promise(s=>s(!0)),I=()=>p({url:"/api/settings",method:"POST",data:l}),C=()=>{Promise.allSettled([D(),I()]).then(()=>{B.reload({preserveScroll:!0}),_({title:"Invoicing Data Updated",message:"Invoicing settings has being updated",type:"success"})})};return(s,e)=>(u(),y(P,{title:"Configuracion / Facturas"},{header:r(()=>[t("div",L,[O,t("div",R,[o(A,{variant:"inverse",onClick:e[0]||(e[0]=a=>C()),class:"w-32"},{default:r(()=>[b(" Save ")]),_:1})])])]),default:r(()=>[t("main",W,[t("article",q,[J,(u(!0),F(E,null,k(i,(a,c)=>(u(),y(S,{key:`taxt-${c}`,class:"w-full",modelValue:i[c],"onUpdate:modelValue":f=>i[c]=f,onRemove:f=>w(a,c)},null,8,["modelValue","onUpdate:modelValue","onRemove"]))),128)),o(n(j),{onClick:V,rounded:"",class:"flex items-center mt-2 text-gray-400 border cursor-pointer hover:bg-gray-100"},{default:r(()=>[o(N,{class:"w-4 h-4 mr-2"}),b(" Agregar Comision ")]),_:1})]),t("article",M,[t("div",G,[H,o(n(m),{class:"",label:"Limite De Pago"},{default:r(()=>[o(n(z),{modelValue:l.invoice_payment_due_days,"onUpdate:modelValue":e[1]||(e[1]=a=>l.invoice_payment_due_days=a),options:[{name:1,label:"Uppon receipt"},{name:7,label:"7 Days"},{name:15,label:"15 Days"},{name:30,label:"30 Days"},{name:45,label:"45 Days"}]},null,8,["modelValue"])]),_:1}),o(n(m),{class:"mt-5",label:"Aceptar pagos online"},{default:r(()=>[o(n($),{modelValue:l.invoice_accept_online_payments,"onUpdate:modelValue":e[2]||(e[2]=a=>l.invoice_accept_online_payments=a)},null,8,["modelValue"])]),_:1})])]),t("article",null,[K,Q,o(n(m),{class:"md:max-w-sm",label:"Factura",rounded:""},{default:r(()=>[o(n(g),{modelValue:l.invoice_label,"onUpdate:modelValue":e[3]||(e[3]=a=>l.invoice_label=a),placeholder:"Factura",rounded:""},null,8,["modelValue"])]),_:1}),o(n(m),{class:"md:max-w-sm",label:"Factura Compra",rounded:""},{default:r(()=>[o(n(g),{modelValue:l.invoice_label,"onUpdate:modelValue":e[4]||(e[4]=a=>l.invoice_label=a),placeholder:"Factura Compra",rounded:""},null,8,["modelValue"])]),_:1})]),t("article",X,[Y,o(n(x),{modelValue:l.invoice_payment_instructions,"onUpdate:modelValue":e[5]||(e[5]=a=>l.invoice_payment_instructions=a),class:"border rounded-md"},null,8,["modelValue"])]),t("article",null,[o(n(m),{class:"w-full",label:"Texto de email"},{default:r(()=>[o(n(x),{modelValue:l.invoice_email_text,"onUpdate:modelValue":e[6]||(e[6]=a=>l.invoice_email_text=a),class:"border rounded-md"},null,8,["modelValue"])]),_:1})])])]),_:1}))}});export{Te as default};
