import{_ as A}from"./trash-b41c2bba.js";import{_ as T}from"./file-8bfe57ae.js";import{_ as U}from"./chevron-right-5280f715.js";import{Q as t,ab as z,ac as b,y as S,l as N,B as P,r as j,d as O,c as W,w as i,C as q,o as L,b as r,a as _,u as a,h as F,E as g}from"./app-e7293397.js";import{_ as J}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import{a as Q,_ as G}from"./BaseTable.vue_vue_type_style_index_0_lang-efd97e4a.js";import{_ as v}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{_ as H}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-516e104c.js";import{_ as K}from"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import{c as C,d as X}from"./constants-fbb1b618.js";import{f as $,g as Y}from"./index-9dc2d84c.js";import{f as Z}from"./formatMoney-b7ef7683.js";import{I as w}from"./IconMarker-562faee5.js";import{d as ee}from"./index-4b317f4f.js";import{p as te}from"./index-3624ec38.js";import{u as ae}from"./useServerSearch-037538e8.js";import"./atmosphere-ui-86b7f8ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./exact-math.node-9a256fc0.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./user-outline-dcfa7b13.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./constants-22f9a1fe.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./customCell-f0a6687f.js";import"./menus-f4817d1f.js";const ne=[{name:"client",label:"Inquilino",class:"text-center",headerClass:"text-center",minWidth:150,render(e){var c,p,d,u,f;const o=((c=e.client)==null?void 0:c.names)+" "+((p=e.client)==null?void 0:p.lastnames),l=((d=e.client)==null?void 0:d.names[0])+((u=e.client)==null?void 0:u.lastnames[0]);return t("div",{class:"px-4"},[t("div",{class:"flex items-center space-x-2"},[t(z,{shape:"circle"},l),t("span",o)]),t("div",{class:"flex items-center text-primary font-bold"},[t(w,{class:"text-primary font-bold"}),t("span",(f=e.property)==null?void 0:f.short_name)])])}},{name:"id",label:"Detalles de Contrato",class:"text-left",headerClass:"text-center",align:"left",minWidth:200,render(e){return t("div",[t("p",{class:"font-bold"},Z(e.amount)),t("p",`DuraciÃ³n: ${$(e.date)} - ${$(e.end_date)} | Mora: ${e.commission}  %`)])}},{name:"owner_name",class:"text-center",type:"money",headerClass:"text-center",label:"Propietario"},{name:"days",label:"Dias restantes",render(e){var l;let o=null;return e.end_date&&(o=ee(te(e.end_date),new Date)),t(S,{href:`/contacts/${(l=e.client)==null?void 0:l.id}/tenants/rents/${e.id}/renew`},t(b,{type:C(e.status)},o))}},{name:"status",label:"Estado",render(e){return t(b,{type:C(e.status)},X(e.status))}},{name:"actions",label:"Acciones",minWidth:150}],se={class:"py-16"},re={class:"flex space-x-4"},oe={class:"flex justify-end items-center"},ie={class:"flex"},Ge=N({__name:"Index",props:{rents:null,serverSearchOptions:null},setup(e){const o=e,{serverSearchOptions:l}=P(o),{executeSearch:c,updateSearch:p,changeSize:d,paginate:u,reset:f,state:h}=ae(l,m=>{p(`/rents?${m}`)},{manual:!0}),y=j({}),k=[{text:"Este mes",range:[30,0]},{text:"3 Meses",range:[90,0]},{text:"Last 6 months",range:[180,0]}],I=(m,n)=>{const x=Y(m,n);g.get(`/rents?${x}`,{},{preserveState:!0})},V=O(()=>Array.isArray(o.rents)?o.rents:o.rents.data),M={selectable:!0,searchBar:!0,pagination:!0};return(m,n)=>{const x=q("UnitTag"),B=U,D=T,R=A;return L(),W(J,{title:"Contratos de alquiler"},{header:i(()=>[r(H)]),default:i(()=>[_("main",se,[_("section",re,[r(Q,{modelValue:a(h).search,"onUpdate:modelValue":n[0]||(n[0]=s=>a(h).search=s),modelModifiers:{lazy:!0},class:"w-full md:flex","has-filters":!0,onClear:n[1]||(n[1]=s=>a(f)()),onBlur:a(c)},null,8,["modelValue","onBlur"]),r(K,{placeholder:"Expira en",class:"min-w-max",options:k,modelValue:y.value.end_date,"onUpdate:modelValue":[n[2]||(n[2]=s=>y.value.end_date=s),n[3]||(n[3]=s=>I("end_date",s.range))],label:"text","track-by":"text"},null,8,["modelValue"]),r(v,{onClick:n[4]||(n[4]=s=>a(g).visit(m.route("rents.create")))},{default:i(()=>[F("Agregar Contrato")]),_:1})]),r(G,{class:"bg-white rounded-md text-body-1 mt-4","table-data":a(V),cols:a(ne),pagination:a(h),total:e.rents.total,onSearch:a(c),onPaginate:a(u),onSizeChange:a(d),config:M},{actions:i(({scope:{row:s}})=>[_("div",oe,[r(x,{status:s.status},null,8,["status"]),r(a(S),{class:"relative inline-block cursor-pointer ml-4 hover:bg-primary hover:text-white px-5 py-2 overflow-hidden font-bold text-body transition rounded-md focus:outline-none hover:bg-opacity-80 min-w-max",href:`/rents/${s.id}`},{default:i(()=>[r(B)]),_:2},1032,["href"]),_("div",ie,[r(v,{class:"hover:text-primary transition items-center flex flex-col justify-center hover:border-primary-400",variant:"neutral",onClick:E=>a(g).visit(`/property/${s.property_id}`)},{default:i(()=>[r(D)]),_:2},1032,["onClick"])]),r(v,{variant:"neutral",class:"hover:text-error transition items-center flex flex-col justify-center hover:border-red-400",onClick:E=>m.deleteUnit(s)},{default:i(()=>[r(R)]),_:2},1032,["onClick"])])]),_:1},8,["table-data","cols","pagination","total","onSearch","onPaginate","onSizeChange"])])]),_:1})}}});export{Ge as default};
