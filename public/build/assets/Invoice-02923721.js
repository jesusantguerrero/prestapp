import{l as C,z as v,m as F,c as y,w as r,o as u,a as t,b as s,h as g,f as T,j as U,F as k,u as i,an as E,a3 as p,M as _,E as $}from"./app-e7293397.js";import{_ as B}from"./AppLayout.vue_vue_type_style_index_0_lang-96d4f03f.js";import P from"./TaxDefinitionBox-77fe4688.js";import{I as S}from"./IconAdd-15a37a95.js";import{_ as N}from"./AppButton.vue_vue_type_script_setup_true_lang-046c4e1c.js";import{F as A,s as j,k as c,z as b,W as z}from"./atmosphere-ui-86b7f8ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-dd64f8b8.js";import"./close-f1b40d6b.js";import"./PaymentGrid-6607ced0.js";import"./mathHelper-95aa3a2b.js";import"./exact-math.node-9a256fc0.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-cb870c82.js";import"./formatMoney-b7ef7683.js";import"./BaseSelect.vue_vue_type_style_index_1_lang-cbd59430.js";import"./AppFormField.vue_vue_type_style_index_0_lang-d6998fd8.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-53b90f8d.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-88bfc502.js";import"./user-outline-dcfa7b13.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-d0093e27.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-f1abe81a.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-e0dfad64.js";import"./constants-22f9a1fe.js";import"./usePaymentModal-ad844d5c.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-1fc13d45.js";import"./IconTrash-b225eb02.js";const L={class:"flex items-center justify-between px-5 border-4 border-white rounded-md"},O=t("div",{class:"flex items-center space-x-2"},null,-1),R={class:"flex overflow-hidden font-bold text-gray-500 rounded-t-lg max-w-min"},W={class:"w-full h-auto px-5 py-10 mx-auto mt-12 space-y-5 bg-white divide-y divide-gray-200 rounded-md sm:px-6 lg:px-8"},q={class:"w-full pb-2"},J=t("h2",{class:"font-bold"},"Comisiones",-1),M={class:"w-full"},G={class:"md:max-w-sm"},H=t("h2",{class:"my-4 font-bold"},"Preferencias De Pago",-1),K=t("h2",{class:"my-4 font-bold"},"Titulo de factura",-1),Q=t("p",{class:"mb-2 text-sm text-gray-400 md:w-8/12"},` By default, all Invoices are labelled 'Invoice' followed by a number (e.g., "Invoice 1"). If your local law, language or occupation requires a different name for your invoices, you can set that here. `,-1),X={class:"w-full"},Y=t("h2",{class:"my-4 font-bold"},"Notas e Instrucciones de pago",-1),Te=C({__name:"Invoice",props:{settingData:{type:Object,default:()=>({invoice_label:"Invoice",invoice_payment_due_days:7,invoice_accept_online_payments:!1,invoice_payment_instructions:"",invoice_email_text:""})},taxes:{type:Array,default:()=>[]}},setup(h){const d=h,l=v({invoice_email_text:"",invoice_payment_instructions:"",invoice_label:"",invoice_payment_due_days:1,...d.settingData,invoice_accept_online_payments:Boolean(d.settingData.invoice_accept_online_payments)}),n=v([...d.taxes]);F(()=>d.taxes,()=>{n.splice(0,n.length,...d.taxes)});const x=()=>{n.push({name:"",rate:0,description:"",type:1,is_default:!1})},w=(a,e)=>{a.id?p({method:"DELETE",url:`/api/taxes/${a.id}`}).then(()=>{n.splice(e,1),_.success({title:"Tax removed",message:"Tax has been removed"})}).catch(()=>{_.error({title:"Error",message:"Could not delete tax"})}):n.splice(e,1)},V=()=>n.length?p.post("/api/taxes",n.filter(a=>a.name&&a.rate)).then(a=>{console.log(a)}).catch(a=>{console.log(a)}):new Promise(a=>a(!0)),D=()=>p({url:"/api/settings",method:"POST",data:l}),I=()=>{Promise.allSettled([V(),D()]).then(()=>{$.reload({preserveScroll:!0}),_({title:"Invoicing Data Updated",message:"Invoicing settings has being updated",type:"success"})})};return(a,e)=>(u(),y(B,{title:"Configuracion / Facturas"},{header:r(()=>[t("div",L,[O,t("div",R,[s(N,{variant:"inverse",onClick:e[0]||(e[0]=o=>I()),class:"w-32"},{default:r(()=>[g(" Save ")]),_:1})])])]),default:r(()=>[t("main",W,[t("article",q,[J,(u(!0),T(k,null,U(n,(o,m)=>(u(),y(P,{key:`taxt-${m}`,class:"w-full",modelValue:n[m],"onUpdate:modelValue":f=>n[m]=f,onRemove:f=>w(o,m)},null,8,["modelValue","onUpdate:modelValue","onRemove"]))),128)),s(i(A),{onClick:x,rounded:"",class:"flex items-center mt-2 text-gray-400 border cursor-pointer hover:bg-gray-100"},{default:r(()=>[s(S,{class:"w-4 h-4 mr-2"}),g(" Agregar Comision ")]),_:1})]),t("article",M,[t("div",G,[H,s(i(c),{class:"",label:"Limite De Pago"},{default:r(()=>[s(i(j),{modelValue:l.invoice_payment_due_days,"onUpdate:modelValue":e[1]||(e[1]=o=>l.invoice_payment_due_days=o),options:[{name:1,label:"Uppon receipt"},{name:7,label:"7 Days"},{name:15,label:"15 Days"},{name:30,label:"30 Days"},{name:45,label:"45 Days"}]},null,8,["modelValue"])]),_:1}),s(i(c),{class:"mt-5",label:"Aceptar pagos online"},{default:r(()=>[s(i(E),{modelValue:l.invoice_accept_online_payments,"onUpdate:modelValue":e[2]||(e[2]=o=>l.invoice_accept_online_payments=o)},null,8,["modelValue"])]),_:1})])]),t("article",null,[K,Q,s(i(c),{class:"md:max-w-sm",label:"Factura",rounded:""},{default:r(()=>[s(i(b),{modelValue:l.invoice_label,"onUpdate:modelValue":e[3]||(e[3]=o=>l.invoice_label=o),placeholder:"Factura",rounded:""},null,8,["modelValue"])]),_:1}),s(i(c),{class:"md:max-w-sm",label:"Factura Compra",rounded:""},{default:r(()=>[s(i(b),{modelValue:l.invoice_label,"onUpdate:modelValue":e[4]||(e[4]=o=>l.invoice_label=o),placeholder:"Factura Compra",rounded:""},null,8,["modelValue"])]),_:1})]),t("article",X,[Y,s(i(z),{modelValue:l.invoice_payment_instructions,"onUpdate:modelValue":e[5]||(e[5]=o=>l.invoice_payment_instructions=o),class:"border rounded-md"},null,8,["modelValue"])])])]),_:1}))}});export{Te as default};
