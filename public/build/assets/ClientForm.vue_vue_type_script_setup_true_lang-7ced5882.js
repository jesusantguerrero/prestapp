import{W as T}from"./atmosphere-ui-83e2a306.js";import{_ as n}from"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import{_ as E}from"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import{_}from"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import{z as N,E as y,l as S,P as q,r as U,d as k,m as P,f as p,b as s,a as u,t as $,u as a,w as f,g as A,F as L,o as V,i as j}from"./app-494b6f90.js";const B=N({isGeneratingDistribution:!1});class F{create(m,i="lender"){const b={...m,[`is_${i}`]:!0};return new Promise((l,c)=>{y.post("/clients",b,{onSuccess(r){l(r)},onError(r){c(r)}})})}generateOwnerDistribution(m,i){B.isGeneratingDistribution=!0;const b=`/clients/${m}/owner-distributions`;i?y.put(`${b}/${i}`):y.post(b)}}const O=new F,g=[{name:"DNI",label:"Cedula"},{name:"PASSPORT",label:"Pasaporte"}],G={ACTIVE:{label:"Activo"},INACTIVE:{label:"Inactivo",color:"success"}},oe=Object.entries(G).map(([o,m])=>({name:o,label:m.label})),R={class:"pb-4 bg-white sm:p-6 sm:pb-4"},W={class:"font-bold text-lg w-full text-center"},z={key:0,class:"px-2 md:px-0"},J={class:"flex flex-col md:flex-row md:space-x-2"},H={class:"flex flex-col md:flex-row md:space-x-2"},K={class:"flex flex-col md:flex-row md:space-x-2"},M={key:1,class:"px-2 md:px-0"},Q={class:"flex space-x-2"},X={class:"flex flex-col md:flex-row md:space-x-2"},Y={key:2},Z={class:"flex space-x-2"},h={class:"flex space-x-2"},te=S({__name:"ClientForm",props:{formData:null,type:{default:"lender"},disabled:{type:Boolean}},emits:["success","error","update:isLoading"],setup(o,{expose:m,emit:i}){const b=o,l=q({names:"",lastnames:"",email:"",cellphone:"",address_details:"",dniType:g[0],dni_type:"DNI",dni:"",work_name:"",work_email:"",work_cellphone:"",work_address_details:"",bank_name:"",bank_account_number:"",owner_distribution_date:""}),c=[{value:"general",label:"Datos Generales"},{value:"work",label:"Datos de trabajo"},{value:"accounting",label:"Cuenta y Pago"}],r=U("general"),D=k(()=>{var t;return(t=c.find(e=>e.value==r.value))==null?void 0:t.label}),C=k(()=>g.find(t=>t.name==l.dni_type).label),v=[{value:"lender",label:"Cliente de Prestamos"},{value:"owner",label:"Propierario"},{value:"tenant",label:"Inquilino"}],x=U(b.type),w=k({set(t){x.value=t.value},get(){return v.filter(t=>x.value==t.value)}}),I=()=>{i("update:isLoading",!0),O.create({...l,[`is_${x.value}`]:!0}).then(()=>{i("success")}).catch(t=>{i("update:isLoading",!1),i("error",t)}).finally(()=>{i("update:isLoading",!1)})};return m({reset:l.reset,onSubmit:I}),P(()=>b.formData,t=>{Object.keys(l.data()).forEach(e=>{e=="date"?l[e]=new Date(t[e]):t&&(l[e]=t[e])})},{deep:!0,immediate:!0}),(t,e)=>(V(),p(L,null,[s(E,{class:"bg-primary/5 w-full",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d),"selected-class":"bg-base-lvl-3 text-primary font-bold",sections:c},null,8,["modelValue"]),u("main",R,[u("h1",W,$(a(D)),1),r.value=="general"?(V(),p("article",z,[u("section",J,[s(n,{label:"Nombres",modelValue:a(l).names,"onUpdate:modelValue":e[1]||(e[1]=d=>a(l).names=d),required:"",disabled:o.disabled},null,8,["modelValue","disabled"]),s(n,{label:"Apellidos",modelValue:a(l).lastnames,"onUpdate:modelValue":e[2]||(e[2]=d=>a(l).lastnames=d),rounded:"",required:"",disabled:o.disabled},null,8,["modelValue","disabled"])]),s(n,{label:"Dirección",required:""},{default:f(()=>[s(a(T),{modelValue:a(l).address_details,"onUpdate:modelValue":e[3]||(e[3]=d=>a(l).address_details=d),class:"border px-4 py-2 bg-neutral/20 shadow-none border-neutral hover:border-secondary/60 focus:border-secondary/60",disabled:o.disabled},null,8,["modelValue","disabled"])]),_:1}),s(n,{label:"Tipo de cliente ",required:"",disabled:o.disabled},{default:f(()=>[s(_,{modelValue:a(w),"onUpdate:modelValue":e[4]||(e[4]=d=>j(w)?w.value=d:null),options:v,"track-by":"value",label:"label",placeholder:"Tipo de cliente",disabled:o.disabled},null,8,["modelValue","disabled"])]),_:1},8,["disabled"]),u("section",H,[s(n,{label:"Tipo Documento",required:""},{default:f(()=>[s(_,{options:a(g),"track-by":"name",modelValue:a(l).dniType,"onUpdate:modelValue":e[5]||(e[5]=d=>a(l).dniType=d),disabled:o.disabled},null,8,["options","modelValue","disabled"])]),_:1}),s(n,{label:a(C),modelValue:a(l).dni,"onUpdate:modelValue":e[6]||(e[6]=d=>a(l).dni=d),rounded:"",required:""},null,8,["label","modelValue"])]),u("section",K,[s(n,{label:"Email",modelValue:a(l).email,"onUpdate:modelValue":e[7]||(e[7]=d=>a(l).email=d),rounded:"",type:"email",disabled:o.disabled},null,8,["modelValue","disabled"]),s(n,{required:"",label:"Telefono",modelValue:a(l).cellphone,"onUpdate:modelValue":e[8]||(e[8]=d=>a(l).cellphone=d),type:"tel",rounded:"",disabled:o.disabled},null,8,["modelValue","disabled"])])])):r.value=="work"?(V(),p("article",M,[u("section",Q,[s(n,{label:"Lugar de trabajo",modelValue:a(l).work_name,"onUpdate:modelValue":e[9]||(e[9]=d=>a(l).work_name=d),disabled:o.disabled},null,8,["modelValue","disabled"])]),s(n,{label:"Dirección de trabajo"},{default:f(()=>[s(a(T),{modelValue:a(l).work_address_details,"onUpdate:modelValue":e[10]||(e[10]=d=>a(l).work_address_details=d),class:"border",disabled:o.disabled},null,8,["modelValue","disabled"])]),_:1}),u("section",X,[s(n,{label:"Email",modelValue:a(l).work_email,"onUpdate:modelValue":e[11]||(e[11]=d=>a(l).work_email=d),rounded:"",type:"email",disabled:o.disabled},null,8,["modelValue","disabled"]),s(n,{label:"Telefono",modelValue:a(l).work_cellphone,"onUpdate:modelValue":e[12]||(e[12]=d=>a(l).work_cellphone=d),type:"tel",rounded:"",disabled:o.disabled},null,8,["modelValue","disabled"])])])):r.value=="accounting"?(V(),p("article",Y,[u("section",Z,[s(n,{label:"Banco",modelValue:a(l).bank_name,"onUpdate:modelValue":e[13]||(e[13]=d=>a(l).bank_name=d),disabled:o.disabled},null,8,["modelValue","disabled"]),s(n,{label:"No. de cuenta",modelValue:a(l).bank_account_number,"onUpdate:modelValue":e[14]||(e[14]=d=>a(l).bank_account_number=d),disabled:o.disabled},null,8,["modelValue","disabled"])]),u("section",h,[s(n,{label:"Dia de generacion de factura",modelValue:a(l).owner_distribution_date,"onUpdate:modelValue":e[15]||(e[15]=d=>a(l).owner_distribution_date=d),disabled:o.disabled},null,8,["modelValue","disabled"])])])):A("",!0)])],64))}});export{B as I,te as _,O as a,oe as c};
