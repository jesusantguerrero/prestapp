import{N as w,i as $}from"./atmosphere-ui-92e9addd.js";import{_ as k}from"./IncomeSummaryWidget.vue_vue_type_script_setup_true_lang-e247a3e9.js";import{_}from"./WelcomeWidget.vue_vue_type_script_setup_true_lang-1aba555b.js";import{_ as h}from"./NextPaymentsWidget.vue_vue_type_script_setup_true_lang-3354f5b8.js";import{_ as N}from"./DashboardTemplate.vue_vue_type_script_setup_true_lang-f9c2b982.js";import D from"./ChartBar-55a5f639.js";import{f as m}from"./formatMoney-b7ef7683.js";import{_ as P,a as Y}from"./document-dbea43a6.js";import{f as B}from"./index-8305cd09.js";import{k as x,o as i,f as g,a as e,b as o,t as f,h as C,u as c,r as j,c as b,w as l,j as E,F}from"./app-bdc0a90d.js";import"./InstallmentTable.vue_vue_type_script_setup_true_lang-0fe0040d.js";import"./sharp-payment-c2380fd2.js";import"./AppButton.vue_vue_type_script_setup_true_lang-fcb67ff4.js";import"./BaseTable.vue_vue_type_style_index_0_lang-09933656.js";import"./customCell-5778d740.js";import"./AppSearch.vue_vue_type_script_setup_true_lang-543932f6.js";import"./close-0030bbab.js";import"./AppSearchFilters-f0af399e.js";import"./usePaymentModal-b60af107.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-2eda9632.js";import"./AppLayout.vue_vue_type_style_index_0_lang-933d19bf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-667d0b29.js";import"./PaymentGrid-0bd36832.js";/* empty css                                                                    */import"./mathHelper-db6605d5.js";import"./exact-math.node-0390b5bc.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-6ae29dfc.js";import"./BaseSelect.vue_vue_type_script_setup_true_lang-f40618a6.js";/* empty css                                                   */import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-b383de19.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-b2380174.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-723236b8.js";import"./clientInteractions-f0f2fe2b.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-18ff5984.js";import"./ButtonGroup.vue_vue_type_script_setup_true_lang-ad826ee3.js";const L={class:"text-sm flex text-body justify-between py-4 shadow-sm px-4 rounded-md border mb-2"},M={class:"flex space-x-3 items-center"},R={class:"font-bold text-primary"},T={class:"font-bold text-xl text-green-500 flex space-x-3 items-center"},G=["href"],O=e("p",null,"Recibo",-1),S=x({__name:"PaymentsCard",props:{payment:null},setup(a){return(t,v)=>{var n;const p=P,u=Y;return i(),g("article",L,[e("section",M,[o(p,{class:"text-xl"}),e("div",null,[e("h5",null,f(a.payment.concept),1),e("small",null,[C(" Pagado en "),e("span",R,f(c(B)(a.payment.payment_date)),1)])])]),e("section",null,[e("p",T,[e("span",null,f(c(m)(a.payment.amount)),1),e("a",{href:`/loans/${(n=a.payment.resource)==null?void 0:n.id}/payments/${a.payment.id}/print`,target:"_blank",rel:"noopener noreferrer",class:"text-secondary px-3 py-1 rounded-md border border-base-lvl-1 flex text-sm bg-base-lvl-2"},[o(u),O],8,G)]),e("span",null,f(a.payment.resource.client_name),1)])])}}}),V={class:"flex flex-col mt-8 lg:space-x-4 lg:flex-row"},A={class:"lg:w-8/12"},q={class:"flex space-x-2"},z={class:"order-1 space-y-5 lg:w-5/12 lg:order-2"},H={class:"pt-4"},je=x({__name:"Loans",props:{revenue:{type:Object,default(){return{previousYear:{values:[]},currentYear:{values:[]}}}},user:{type:Object,required:!0},activeLoanClients:{type:Number},loanCapital:{type:Number},loanExpectedInterest:{type:Number},loanPaidInterest:{type:Number},paidInterest:{type:Array},bank:{type:Number}},setup(a){var y;const t=a,v=[{label:"Clientes con Prestamos",value:t.activeLoanClients,icon:"fa-users"},{label:"Capital Prestado",icon:"fa-money",value:m(t.loanCapital??0)},{label:"Interes Esperado",icon:"fa-wallet",value:m(t.loanExpectedInterest??0)},{label:"Total Interes pagado",value:m(t.loanPaidInterest??0),accent:!0}],p={headers:{gapName:"Year",previous:t.revenue.previousYear.total,current:t.revenue.currentYear.total},options:{chart:{id:"vuechart-example"},stroke:{curve:"smooth"},dropShadow:{enabled:!0,top:3,left:0,blur:1,opacity:.5},colors:["#fa6b88","#80CDFE"]},series:[{name:"previous year",data:t.revenue.previousYear.values.map(r=>r.total)},{name:"current year",data:t.revenue.currentYear.values.map(r=>r.total)}]},u={headers:{gapName:"Year",month:t.paidInterest.months.at(-1).outcome,avg:t.paidInterest.avg,current:(y=t.paidInterest)==null?void 0:y.year},options:{chart:{id:"vuechart-example"},stroke:{curve:"smooth"},dropShadow:{enabled:!0,top:3,left:0,blur:1,opacity:.5},colors:["#fa6b88","#80CDFE"]},series:[{name:"current year",data:t.paidInterest.months.map(r=>r.outcome)}]},n=j("cash-flow");return(r,s)=>(i(),b(N,{user:a.user},{default:l(()=>[o(_,{message:"Bienvenido a ICLoan",username:a.user.name,cards:v},null,8,["username"]),e("section",V,[e("article",A,[o(_,{message:"Rendimiento del mes",class:"order-2 mt-4 lg:mt-0 lg:order-1"},{actions:l(()=>[e("section",q,[e("button",{onClick:s[0]||(s[0]=d=>n.value="gains"),class:"bg-base-lvl-2 rounded-3xl text-body-1 px-4"}," Ganancias "),e("button",{onClick:s[1]||(s[1]=d=>n.value="cash-flow"),class:"bg-base-lvl-2 rounded-3xl text-body-1 px-4"}," Cash ")])]),content:l(()=>[n.value=="cash-flow"?(i(),b(k,{key:0,title:"Flujo de efectivo",description:"Flujo de efectivo en el año",style:{height:"300px"},chart:p,headerInfo:p.headers},null,8,["headerInfo"])):(i(),b(D,{key:1,title:"Ganancias",description:"Ganancias por intereses en el año",chart:u,headerInfo:u.headers},null,8,["headerInfo"]))]),_:1}),o(h)]),e("article",z,[o(c($),{class:"text-white bg-secondary h-36",icon:"fas fa-wallet",value:c(m)(t.bank.balance|0),title:"Balance cuenta prestamos"},{action:l(()=>[o(c(w),{class:"bg-secondary/60 rounded-md",onClick:s[2]||(s[2]=d=>r.isTransferModalOpen=!0)},{default:l(()=>[C(" Agregar fondos ")]),_:1})]),_:1},8,["value"]),o(h,{title:"Pagos por periodo",endpoint:"/api/loan-payments?",method:"back","default-range":"7D","date-field":"payment_date",ranges:[{label:"1D",value:[1,1]},{label:"7D",value:[7,0]},{label:"30D",value:[30,0]},{label:"90D",value:[90,0]}]},{content:l(({list:d})=>[e("div",H,[(i(!0),g(F,null,E(d,I=>(i(),b(S,{payment:I},null,8,["payment"]))),256))])]),_:1})])])]),_:1},8,["user"]))}});export{je as default};
