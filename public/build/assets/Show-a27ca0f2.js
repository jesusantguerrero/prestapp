import{k as q,d as _,r as y,c as h,w as l,u as s,o as m,b as i,E as u,h as d,a as e,t as o,f as $,j as P,n as G,y as I,F as D,g as V,Q as R}from"./app-fef21123.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-dc441d96.js";import"./AppLayout.vue_vue_type_style_index_0_lang-cff2a039.js";import{_ as b}from"./AppButton.vue_vue_type_script_setup_true_lang-78bec775.js";import{_ as z}from"./AppSectionHeader-602a6dfc.js";import{f as k}from"./index-901d5032.js";import{_ as J}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-f16b6b1a.js";import{_ as O}from"./InvoiceCard.vue_vue_type_script_setup_true_lang-c3a05c67.js";import{_ as Q}from"./PaymentFormModal.vue_vue_type_script_setup_true_lang-3ea39cd1.js";import{_ as E}from"./WelcomeWidget.vue_vue_type_script_setup_true_lang-d46ec886.js";import{f as F}from"./formatMoney-b7ef7683.js";import"./atmosphere-ui-43ec926d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal.vue_vue_type_script_setup_true_lang-05fdc6cc.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-f3e358be.js";import"./BaseSelect.vue_vue_type_script_setup_true_lang-c6d5c1da.js";/* empty css                                                   */import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./usePaymentModal-a07a875e.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-396b1c58.js";import"./close-ce456e3e.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-5401ee99.js";import"./clientInteractions-23fb4c77.js";import"./AppSearch.vue_vue_type_script_setup_true_lang-7eed6d28.js";import"./AppSearchFilters-54a857cd.js";import"./menus-be25f72f.js";import"./constants-ba74557c.js";import"./PaymentGrid-926a1204.js";/* empty css                                                                    */import"./mathHelper-02ca0ff8.js";import"./exact-math.node-8398c915.js";import"./constants-0a903a05.js";const U={class:"p-5 mt-8"},H={class:"w-full px-5 pt-10 pb-2 mb-5 space-y-5 text-gray-600 bg-white rounded-b-md"},K={class:"flex space-x-2"},W={class:"flex w-full space-x-8 rounded-t-none border-t-none"},X={class:"w-9/12 space-y-2"},Y={class:"py-4 space-y-2"},Z={class:"hover:bg-base-lvl-1 cursor-pointer py-2"},ee={class:"w-3/12 p-4 space-y-2 rounded-md bg-base-lvl-3"},te={class:"flex space-x-4"},ne={class:"py-4 mt-8 space-y-2"},ae={key:0,class:"text-sm"},se={class:"font-bold text-green-500"},oe={class:"font-bold text-primary"},re=["href"],Ie=q({__name:"Show",props:{rents:null,currentTab:{default:"summary"}},setup(t){const f=t,N={summary:"Detalles",transactions:"Pagos"},g=_(()=>{var n;return f.rents.client.names+" "+((n=f.rents.client)==null?void 0:n.lastnames)}),T=_(()=>`${g.value.split(",")[0]}`),x=y(!1),c=y(null),A=n=>{c.value={...n,amount:parseFloat(n.debt)||n.total,id:void 0,invoice_id:n.id},x.value=!0},B=_(()=>c.value&&`Pago ${f.rents.id} pago #${c.value.installment_id}`),v=y(""),w=y(),M=n=>{v.value=`/invoices/${n.id}/print`,console.log(v.value,n),R(()=>{w.value.click(),v.value=""})},S=(n,a)=>{switch(n){case"payment":A(a);break;case"download":M(a);break}},C=()=>{u.reload()},L=()=>{u.post(`/rents/${f.rents.id}/generate-next-invoice`,{onSuccess(){C()}})};return(n,a)=>(m(),h(j,{title:s(T)},{header:l(()=>[i(J,null,{actions:l(()=>[i(b,{variant:"neutral",onClick:a[0]||(a[0]=r=>s(u).visit(n.route("rents.create")))},{default:l(()=>[d(" Crear Gasto ")]),_:1}),i(b,{variant:"neutral",onClick:a[1]||(a[1]=r=>s(u).visit(n.route("rents.create")))},{default:l(()=>[d(" Crear Mora ")]),_:1}),i(b,{variant:"inverse-secondary",onClick:a[2]||(a[2]=r=>s(u).visit(n.route("rents.create")))},{default:l(()=>[d(" Crear Cargo Extra ")]),_:1})]),_:1})]),default:l(()=>[e("main",U,[i(z,{name:"Contrato de Alquiler a",class:"px-5 bg-white border-2 border-white rounded-md rounded-b-none",resource:t.rents,title:`${s(g)}`,"hide-action":"",onCreate:a[3]||(a[3]=r=>s(u).visit("/loans/create"))},null,8,["resource","title"]),e("div",H,[e("div",null,"Alquiler #"+o(t.rents.id)+" para "+o(s(g)),1),e("div",K,[(m(),$(D,null,P(N,(r,p)=>i(s(I),{class:G(["px-2 py-1 transition rounded-md cursor-pointer bg-gray-50 hover:bg-gray-200",{"bg-gray-300":p==t.currentTab}]),key:p,href:`/rents/${t.rents.id}?current-tab=${p}`,replace:""},{default:l(()=>[d(o(r),1)]),_:2},1032,["class","href"])),64))])]),e("section",W,[e("article",X,[i(E,{message:"Detalles de contrato",class:"w-full text-body-1"},{content:l(()=>[e("section",Y,[e("p",null," Mensualidad: "+o(t.rents.amount),1),e("p",null," Fecha de Inicio: "+o(s(k)(t.rents.date)),1),e("p",null," Proximo pago: "+o(s(k)(t.rents.next_invoice_date)),1),e("p",null," Estatus: "+o(t.rents.status),1),e("p",Z," Deposito "+o(s(F)(t.rents.deposit)),1)])]),_:1}),i(E,{message:"Detalles de propiedad",class:"w-full text-body-1"},{content:l(()=>[e("section",null,[e("article",null,[e("button",null,o(t.rents.property.owner.display_name),1)]),e("article",null,[e("button",null,o(t.rents.property.name),1)])])]),_:1})]),e("article",ee,[e("section",te,[i(b,{class:"w-full",variant:"secondary",onClick:L},{default:l(()=>[d(" Generar proximo pago ")]),_:1})]),e("section",ne,[t.rents.transaction?(m(),$("div",ae,[d(o(t.rents.transaction.description)+" ",1),e("span",se,o(s(F)(t.rents.transaction.total)),1),d(" en "),e("span",oe,o(s(k)(t.rents.date)),1)])):V("",!0),(m(!0),$(D,null,P(t.rents.invoices,r=>(m(),h(O,{invoice:r,actions:{payment:{label:"Registrar Pago"},send:{label:"Enviar Correo"},download:{label:"Descargar PDF"},view:{label:"Ver factura"},delete:{label:"Eliminar Factura"}},onAction:p=>S(p,r)},null,8,["invoice","onAction"]))),256))])])]),c.value?(m(),h(Q,{key:0,modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=r=>x.value=r),title:"Pagar Renta",payment:c.value,endpoint:`/rents/${t.rents.id}/invoices/${c.value.invoice_id}/pay`,due:c.value.amount,"default-concept":s(B),onSaved:a[5]||(a[5]=r=>C())},null,8,["modelValue","payment","endpoint","due","default-concept"])):V("",!0),e("a",{href:v.value,download:"",target:"_blank",ref_key:"invoiceLink",ref:w,type:"hidden"},null,8,re)])]),_:1},8,["title"]))}});export{Ie as default};
