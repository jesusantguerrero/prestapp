import{T as B,c as m}from"./atmosphere-ui-83e2a306.js";import{_ as b}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{_ as M}from"./RentFormPersonal.vue_vue_type_script_setup_true_lang-634ae006.js";import{_ as P}from"./RentFormProperty.vue_vue_type_script_setup_true_lang-bbfebcbf.js";import{_ as U}from"./RentFormContract.vue_vue_type_script_setup_true_lang-ad8c3c2a.js";import{_ as N}from"./RentFormFees.vue_vue_type_script_setup_true_lang-ca216fee.js";import{f as x,d as _}from"./index-9dc2d84c.js";import{a as f}from"./index-17a9d477.js";import{l as F,z as S,m as y,r as j,d as L,c as O,w as n,u as s,o as q,a as z,b as o,h as D,t as A}from"./app-494b6f90.js";const E={class:"flex justify-end space-x-2 mt-auto md:mt-16 md:px-32"},X=F({__name:"RentFormTemplate",props:{data:null,isProcessing:{type:Boolean},client:null,unit:null,property:null},emits:["submit"],setup(u,{emit:V}){var v,h,g,w;const i=u,e=S({property_id:(v=i.property)==null?void 0:v.id,property:i.property,unit_id:(h=i.unit)==null?void 0:h.id,unit:i.unit,is_new_client:!1,client_id:null,client_name:"",client:null,date:new Date,deposit:(g=i.unit)==null?void 0:g.price,deposit_due:new Date,is_deposit_received:!1,deposit_reference:"",payment_account_id:null,payment_method:"",amount:(w=i.unit)==null?void 0:w.price,first_invoice_date:f(new Date,1),next_invoice_date:f(new Date,1),end_date:null,frequency:"MONTHLY",commission:10,commission_type:"",late_fee:10,late_fee_type:"",grace_days:0,additional_fees:[]});y(()=>e.unit,t=>{t&&(e.amount=t.price)}),y(()=>e.deposit_due,t=>{e.date=t},{immediate:!0}),y(()=>e.date,t=>{e.first_invoice_date=f(t,1)},{immediate:!0});const C=[{handle:()=>e.client||e.client_name},{handle:()=>e.property&&e.unit},{handle:()=>e.deposit&&e.amount}],p=()=>new Promise(t=>{var a;return t(!((a=C[d.value])!=null&&a.handle()))}),d=j(0),k=L(()=>["Datos de propiedad","Datos de renta","Cargo y Moras","Guardar"][d.value]),r=t=>{console.log(t,"updating"),Object.keys(e).forEach(a=>{t[a]&&(e[a]=t[a])})},T=()=>{var a,l,c;const t={...e,deposit_due:x(e.deposit_due,"y-M-d"),date:x(e.date,"yyyy-MM-dd"),first_invoice_date:_(e.first_invoice_date),next_invoice_date:_(e.next_invoice_date),end_date:_(e.end_date),unit_id:(a=e.unit)==null?void 0:a.id,property_id:(l=e.property)==null?void 0:l.id,client_id:(c=e.client)==null?void 0:c.id};delete t.property,delete t.client,delete t.unit,V("submit",t)};return(t,a)=>(q(),O(s(B),{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=l=>d.value=l),"finish-status":"success",simple:"",style:{"margin-top":"20px"},"active-class":"bg-primary text-white","circle-active-color":"bg-primary text-white","load-shadow-color":"shadow-primary",onFinished:T},{footer:n(({prev:l,next:c})=>[z("footer",E,[o(b,{variant:"neutral",onClick:$=>l(),class:"w-full md:w-fit"},{default:n(()=>[D("Atras")]),_:2},1032,["onClick"]),o(b,{variant:"inverse",rounded:"",class:"w-full md:w-fit",processing:u.isProcessing,disabled:u.isProcessing,onClick:$=>c()},{default:n(()=>[D(A(s(k)),1)]),_:2},1032,["processing","disabled","onClick"])])]),default:n(()=>[o(s(m),{name:"personal",title:"Datos Personales","before-change":p},{default:n(()=>[o(M,{"model-value":e,"onUpdate:modelValue":r},null,8,["model-value"])]),_:1}),o(s(m),{name:"property",title:"Propiedad","before-change":p},{default:n(()=>[o(P,{"model-value":e,"onUpdate:modelValue":r},null,8,["model-value"])]),_:1}),o(s(m),{name:"rent_details",title:"Detalles de renta","before-change":p},{default:n(()=>[o(U,{"model-value":e,"onUpdate:modelValue":r},null,8,["model-value"])]),_:1}),o(s(m),{name:"fees",title:"Cargos y mora"},{default:n(()=>[o(N,{"model-value":e,"onUpdate:modelValue":r},null,8,["model-value"])]),_:1})]),_:1},8,["modelValue"]))}});export{X as _};
