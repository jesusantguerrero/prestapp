import{N as w,V as m,R as d,y as k,F as h}from"./atmosphere-ui-43ec926d.js";import{k as v,P as U,l as $,c as N,w as s,o as u,b as t,a as n,u as e,h as c,f as y,j as C,F}from"./app-fef21123.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-dc441d96.js";import"./AppLayout.vue_vue_type_style_index_0_lang-cff2a039.js";import{_ as T}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-f16b6b1a.js";import{_ as j}from"./AppButton.vue_vue_type_script_setup_true_lang-78bec775.js";import{p as P}from"./constants-ca1255a1.js";import{_ as R}from"./BaseSelect.vue_vue_type_script_setup_true_lang-c6d5c1da.js";/* empty css                                                   */import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-3ea39cd1.js";import"./PaymentGrid-926a1204.js";/* empty css                                                                    */import"./mathHelper-02ca0ff8.js";import"./exact-math.node-8398c915.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-f3e358be.js";import"./formatMoney-b7ef7683.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-05fdc6cc.js";import"./usePaymentModal-a07a875e.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-396b1c58.js";import"./close-ce456e3e.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-5401ee99.js";import"./clientInteractions-23fb4c77.js";import"./AppSearch.vue_vue_type_script_setup_true_lang-7eed6d28.js";import"./AppSearchFilters-54a857cd.js";import"./menus-be25f72f.js";const S={class:"flex justify-end space-x-2"},A={class:"mx-auto mt-8 text-gray-500 sm:px-6 lg:px-8"},D={class:"w-full px-5 py-4 space-y-4 text-gray-600 bg-white rounded-md shadow-md"},E={class:"flex space-x-5"},L={class:"md:flex md:space-y-0 md:space-x-2 space-y-4"},G={class:"space-x-4 grid grid-cols-[196px,1fr]"},I=n("i",{class:"mr-2 fa fa-plus-circle"},null,-1),ye=v({__name:"PropertyForm",props:["properties","clients"],setup(V){const p=V,r=U({name:"",description:"",owner:null,owner_id:"",address:"",property_type:"",price:0,units:[{price:0,description:""}]});$(()=>p.properties,a=>{a&&b(a,r)},{immediate:!0,deep:!0});function b(a,l){Object.keys(l).forEach(o=>{l[o]=a[o]||l[o],o=="owner_id"&&(l.owner=p.clients.find(i=>i.id==l.owner_id))})}const x=()=>{var i;const a=(i=p.properties)==null?void 0:i.id,l=a?"put":"post",o=a?`/${p.properties.id}`:"";r.transform(f=>{var _;return{...f,owner_id:(_=f.owner)==null?void 0:_.id}})[l](`/properties${o}`,{onsuccess(){route.visit(route("properties"))}})},g=()=>{const a=r.units.length+1;r.units.push({index:a,description:"",price:0})};return(a,l)=>(u(),N(B,{title:"Agregar propiedad"},{header:s(()=>[t(T,null,{actions:s(()=>[n("section",S,[t(e(w),{class:"font-bold text-red-400 bg-gray-100 rounded-md",variant:"secondary",onClick:l[0]||(l[0]=o=>a.goToList())},{default:s(()=>[c(" Cancelar ")]),_:1}),t(j,{variant:"inverse",onClick:x},{default:s(()=>[c(" Guardar propiedad ")]),_:1})])]),_:1})]),default:s(()=>[n("main",A,[n("div",D,[n("div",E,[t(e(d),{class:"w-full",label:"Dirección"},{default:s(()=>[t(e(m),{modelValue:e(r).address,"onUpdate:modelValue":l[1]||(l[1]=o=>e(r).address=o),class:"w-full border-b focus:outline-none",placeholder:"Dirección",rounded:""},null,8,["modelValue"])]),_:1}),t(e(d),{class:"w-4/12",label:"Dueño de propiedad"},{default:s(()=>[t(R,{modelValue:e(r).owner,"onUpdate:modelValue":l[2]||(l[2]=o=>e(r).owner=o),endpoint:"/api/clients?filter[is_owner]=1",placeholder:"Selecciona un dueño",label:"display_name","track-by":"id"},null,8,["modelValue"])]),_:1})]),n("div",L,[t(e(d),{class:"w-full",label:"Nombre de propiedad"},{default:s(()=>[t(e(m),{modelValue:e(r).name,"onUpdate:modelValue":l[3]||(l[3]=o=>e(r).name=o),class:"w-full",placeholder:"Nombre de propiedad",rounded:""},null,8,["modelValue"])]),_:1}),t(e(d),{class:"w-full",label:"Tipo de propiedad"},{default:s(()=>[t(e(k),{modelValue:e(r).property_type,"onUpdate:modelValue":l[4]||(l[4]=o=>e(r).property_type=o),selected:e(r).type,"onUpdate:selected":l[5]||(l[5]=o=>e(r).type=o),options:e(P),placeholder:"Selecciona un tipo",label:"label","key-track":"value"},null,8,["modelValue","selected","options"])]),_:1})]),(u(!0),y(F,null,C(e(r).units,o=>(u(),y("section",G,[t(e(d),{class:"w-full",label:"Precio de Renta"},{default:s(()=>[t(e(m),{modelValue:o.price,"onUpdate:modelValue":i=>o.price=i,class:"w-full",rounded:"","number-format":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(e(d),{label:"Descripción"},{default:s(()=>[t(e(h),{modelValue:o.description,"onUpdate:modelValue":i=>o.description=i,class:"w-full p-2 border focus:outline-none",placeholder:"Descripcion de la propiedad"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),256)),t(e(w),{class:"text-gray-400",onClick:l[6]||(l[6]=o=>g())},{default:s(()=>[I,c(" Add unit ")]),_:1})])])]),_:1}))}});export{ye as default};
