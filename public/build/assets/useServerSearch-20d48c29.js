import{z as m,l as d,L as g,E as h}from"./app-de9d56f0.js";import{c as y,p as c}from"./index-8305cd09.js";import{f as u}from"./index-c251e33c.js";y(1996);const $=(e,r,s)=>{let i=[];if(r&&Object.entries(r).forEach(([t,l])=>{l&&i.push(`filter[${t}]=${l}`)}),s.startDate)try{let t=u(s.startDate,"yyyy-MM-dd");s.endDate&&(t+=`~${u(s.endDate,"yyyy-MM-dd")}`),i.push(`filter[${e}]=${t}`)}catch{return i.join("&")}return i.join("&")},b=e=>e&&`relationships=${e}`,P=e=>e.page&&`page=${e.page}&limit=${e.limit}`,p=e=>{let r=[$("date",e.filters,e.dates),b(e.relationships),P(e)];return e.search&&r.unshift(`search=${e.search}`),r.filter(s=>s==null?void 0:s.trim()).join("&")},D=e=>{h.get(e,void 0,{preserveState:!0})},E=(e,r,s={})=>{const i=f(e),t=m({filters:{...e.value.filters,date:null},dates:{startDate:i.startDate,endDate:i.endDate},sorts:e.value.sorts,limit:e.value.limit,relationships:e.value.relationships,search:e.value.search,page:e.value.page});d(()=>t,g.debounce(a=>{const n=p(a),o=window.location.toString();n!=o&&!s.manual&&r&&r(n)},400),{deep:!0});const l=()=>{const a=p(t);r&&r(a)};function f(a){var o;const n=(o=a==null?void 0:a.value.filters)!=null&&o.date?a.value.filters.date.split("~"):[null,null];return{startDate:c(n[0]),endDate:n.length==2?c(n[1]):null}}return{state:t,executeSearch:l,updateSearch:D,changeSize:a=>{t.limit=a,l()},paginate:a=>{t.page=a,l()},reset:()=>{t.search="",t.filters={},t.sorts="",l()}}};export{E as u};
