import{_ as U,a as k,b as v}from"./sharp-photo-size-select-small-cad54262.js";import{F as b,z as $,W as B}from"./atmosphere-ui-83e2a306.js";import{l as C,P as F,m as N,c as T,w as t,o as _,b as l,a as n,u as s,h as f,f as V,j as I,F as j}from"./app-494b6f90.js";import{_ as z}from"./AppLayout.vue_vue_type_style_index_0_lang-3aae0800.js";import{_ as A}from"./PropertySectionNav.vue_vue_type_script_setup_true_lang-d424aeb5.js";import{_ as P}from"./AppButton.vue_vue_type_script_setup_true_lang-6731c3fc.js";import{p as S}from"./constants-79e2e68b.js";import{_ as w}from"./BaseSelect.vue_vue_type_style_index_1_lang-7b13fe11.js";import{_ as i}from"./AppFormField.vue_vue_type_style_index_0_lang-2eb2a149.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./PaymentFormModal.vue_vue_type_script_setup_true_lang-2fd658ef.js";import"./close-40de6817.js";import"./PaymentGrid-a2bc0bdb.js";import"./mathHelper-d6bc48cd.js";import"./exact-math.node-f7579f9b.js";import"./constants-0a903a05.js";import"./AccountSelect.vue_vue_type_script_setup_true_lang-93902e28.js";import"./formatMoney-b7ef7683.js";import"./index-c251e33c.js";import"./index-81f33ca2.js";import"./Modal.vue_vue_type_script_setup_true_lang-ca2f799a.js";import"./InvoiceFormModal.vue_vue_type_script_setup_true_lang-d4cb9813.js";import"./user-outline-c87acd59.js";import"./ClientFormModal.vue_vue_type_script_setup_true_lang-593db1f8.js";import"./ClientForm.vue_vue_type_script_setup_true_lang-7ced5882.js";import"./SectionNav.vue_vue_type_script_setup_true_lang-3cbc58a3.js";import"./usePaymentModal-f96f741a.js";import"./FastAccessOptions.vue_vue_type_script_setup_true_lang-ff3d4599.js";import"./menus-f4817d1f.js";const D={class:"flex justify-end space-x-2"},E={class:"mx-auto mt-8 text-gray-500 sm:px-6 lg:px-8"},L={class:"w-full px-5 py-4 space-y-4 text-gray-600 bg-white rounded-md shadow-md"},W={class:"flex space-x-5"},G={class:"md:flex md:space-x-2 space-y-4"},H={class:"grid grid-cols-4 gap-4"},O={class:"inline-blocks h-full flex items-center px-2"},R={class:"inline-blocks h-full flex items-center px-2"},q={class:"inline-blocks h-full flex items-center px-2"},J=n("i",{class:"mr-2 fa fa-plus-circle"},null,-1),Ue=C({__name:"PropertyForm",props:["properties","clients"],setup(x){const c=x,a=F({name:"",description:"",owner:null,owner_id:"",address:"",property_type:"",price:0,units:[{price:0,description:""}]});N(()=>c.properties,r=>{r&&h(r,a)},{immediate:!0,deep:!0});function h(r,o){Object.keys(o).forEach(p=>{o[p]=r[p]||o[p],p=="owner_id"&&(o.owner=c.clients.find(m=>m.id==o.owner_id))})}const y=()=>{var m;const r=(m=c.properties)==null?void 0:m.id,o=r?"put":"post",p=r?`/${c.properties.id}`:"";a.transform(u=>{var e;return{...u,owner_id:(e=u.owner)==null?void 0:e.id}})[o](`/properties${p}`,{onsuccess(){route.visit(route("properties"))}})},g=()=>{const r=a.units.length+1;a.units.push({index:r,description:"",price:0})};return(r,o)=>{const p=U,m=k,u=v;return _(),T(z,{title:"Agregar propiedad"},{header:t(()=>[l(A,null,{actions:t(()=>[n("section",D,[l(s(b),{class:"font-bold text-red-400 bg-gray-100 rounded-md",variant:"secondary",onClick:o[0]||(o[0]=e=>r.goToList())},{default:t(()=>[f(" Cancelar ")]),_:1}),l(P,{variant:"inverse",onClick:y},{default:t(()=>[f(" Guardar propiedad ")]),_:1})])]),_:1})]),default:t(()=>[n("main",E,[n("div",L,[n("div",W,[l(i,{label:"Dirección",modelValue:s(a).address,"onUpdate:modelValue":o[1]||(o[1]=e=>s(a).address=e),class:"w-full border-b focus:outline-none",placeholder:"Dirección",rounded:""},null,8,["modelValue"]),l(i,{class:"w-4/12",label:"Dueño de propiedad"},{default:t(()=>[l(w,{modelValue:s(a).owner,"onUpdate:modelValue":o[2]||(o[2]=e=>s(a).owner=e),endpoint:"/api/clients?filter[is_owner]=1",placeholder:"Selecciona un dueño",label:"display_name","track-by":"id"},null,8,["modelValue"])]),_:1})]),n("div",G,[l(i,{label:"Nombre de propiedad",modelValue:s(a).name,"onUpdate:modelValue":o[3]||(o[3]=e=>s(a).name=e),class:"w-full",placeholder:"Nombre de propiedad",rounded:""},null,8,["modelValue"]),l(i,{class:"w-full",label:"Tipo de propiedad"},{default:t(()=>[l(w,{modelValue:s(a).type,"onUpdate:modelValue":[o[4]||(o[4]=e=>s(a).type=e),o[5]||(o[5]=e=>s(a).property_type=e.name)],options:s(S),placeholder:"Selecciona un tipo",label:"label","track-by":"name"},null,8,["modelValue","options"])]),_:1})]),(_(!0),V(j,null,I(s(a).units,e=>(_(),V("section",null,[n("section",H,[l(i,{class:"w-full",label:"Precio de Renta"},{default:t(()=>[l(s($),{modelValue:e.price,"onUpdate:modelValue":d=>e.price=d,class:"w-full",rounded:"","number-format":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"w-full",label:"Area",modelValue:e.area,"onUpdate:modelValue":d=>e.area=d,rounded:""},{prefix:t(()=>[n("span",O,[l(p)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(i,{class:"w-full",label:"Habitaciones",modelValue:e.bedrooms,"onUpdate:modelValue":d=>e.bedrooms=d,rounded:""},{prefix:t(()=>[n("span",R,[l(m)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(i,{class:"w-full",label:"Baños",modelValue:e.bathrooms,"onUpdate:modelValue":d=>e.bathrooms=d,rounded:"",placeholder:"0"},{prefix:t(()=>[n("span",q,[l(u)])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l(i,{label:"Notas/Detalles"},{default:t(()=>[l(s(B),{modelValue:e.description,"onUpdate:modelValue":d=>e.description=d,class:"w-full p-2 border focus:outline-none",placeholder:"Descripcion de la propiedad"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),256)),l(s(b),{class:"text-gray-400",onClick:o[6]||(o[6]=e=>g())},{default:t(()=>[J,f(" Add unit ")]),_:1})])])]),_:1})}}});export{Ue as default};
