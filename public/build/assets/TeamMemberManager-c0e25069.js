import{P as k,r as x,f as a,b as l,w as t,g as u,o as n,h as r,a as o,u as s,F as C,j as w,n as v,t as _,E as G,J as H}from"./app-5778ba55.js";import{_ as K}from"./ActionMessage-08ef7244.js";import{_ as j}from"./ActionSection-1e4234d2.js";import{_ as B}from"./ConfirmationModal-fdb331af.js";import{_ as P}from"./DangerButton-301c0e96.js";import{_ as Q}from"./DialogModal-b87ad764.js";import{_ as W}from"./FormSection-a0746ebb.js";import{_ as z}from"./InputError-d24a4748.js";import{_ as F}from"./InputLabel-22bbf969.js";import{_ as V}from"./PrimaryButton-12d36d32.js";import{_ as M}from"./SecondaryButton-0997b2a9.js";import{S}from"./SectionBorder-3d0e9b2a.js";import{_ as X}from"./TextInput-6a85b1bc.js";import"./SectionTitle-52cec1a0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal.vue_vue_type_script_setup_true_lang-32b3b269.js";const Y={key:0},Z=o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1),ee={class:"col-span-6 sm:col-span-4"},te={key:0,class:"col-span-6 lg:col-span-4"},se={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},oe=["onClick"],le={class:"flex items-center"},ae={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ne=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),re=[ne],ie={class:"mt-2 text-xs text-gray-600 text-left"},me={key:1},ce={class:"space-y-6"},de={class:"text-gray-600"},ue={class:"flex items-center"},ve=["onClick"],fe={key:2},be={class:"space-y-6"},_e={class:"flex items-center"},ye=["src","alt"],ge={class:"ml-4"},pe={class:"flex items-center"},he=["onClick"],ke={key:1,class:"ml-2 text-sm text-gray-400"},xe=["onClick"],Ce={key:0},we={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Te=["onClick"],Re={class:"flex items-center"},$e={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Me=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Se=[Me],Ae={class:"mt-2 text-xs text-gray-600"},He={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(i){const g=i,c=k({email:"",role:null}),f=k({role:null}),T=k(),R=k(),p=x(!1),$=x(null),h=x(!1),y=x(null),L=()=>{c.post(route("team-members.store",g.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>c.reset()})},N=d=>{G.delete(route("team-invitations.destroy",d),{preserveScroll:!0})},O=d=>{$.value=d,f.role=d.membership.role,p.value=!0},E=()=>{f.put(route("team-members.update",[g.team,$.value]),{preserveScroll:!0,onSuccess:()=>p.value=!1})},I=()=>{h.value=!0},J=()=>{T.delete(route("team-members.destroy",[g.team,H().props.user]))},D=d=>{y.value=d},U=()=>{R.delete(route("team-members.destroy",[g.team,y.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>y.value=null})},A=d=>g.availableRoles.find(m=>m.key===d).name;return(d,m)=>(n(),a("div",null,[i.userPermissions.canAddTeamMembers?(n(),a("div",Y,[l(S),l(W,{onSubmitted:L},{title:t(()=>[r(" Add Team Member ")]),description:t(()=>[r(" Add a new team member to your team, allowing them to collaborate with you. ")]),form:t(()=>[Z,o("div",ee,[l(F,{for:"email",value:"Email"}),l(X,{id:"email",modelValue:s(c).email,"onUpdate:modelValue":m[0]||(m[0]=e=>s(c).email=e),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),l(z,{message:s(c).errors.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(n(),a("div",te,[l(F,{for:"roles",value:"Role"}),l(z,{message:s(c).errors.role,class:"mt-2"},null,8,["message"]),o("div",se,[(n(!0),a(C,null,w(i.availableRoles,(e,b)=>(n(),a("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":b>0,"rounded-b-none":b!=Object.keys(i.availableRoles).length-1}]),onClick:q=>s(c).role=e.key},[o("div",{class:v({"opacity-50":s(c).role&&s(c).role!=e.key})},[o("div",le,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":s(c).role==e.key}])},_(e.name),3),s(c).role==e.key?(n(),a("svg",ae,re)):u("",!0)]),o("div",ie,_(e.description),1)],2)],10,oe))),128))])])):u("",!0)]),actions:t(()=>[l(K,{on:s(c).recentlySuccessful,class:"mr-3"},{default:t(()=>[r(" Added. ")]),_:1},8,["on"]),l(V,{class:v({"opacity-25":s(c).processing}),disabled:s(c).processing},{default:t(()=>[r(" Add ")]),_:1},8,["class","disabled"])]),_:1})])):u("",!0),i.team.team_invitations.length>0&&i.userPermissions.canAddTeamMembers?(n(),a("div",me,[l(S),l(j,{class:"mt-10 sm:mt-0"},{title:t(()=>[r(" Pending Team Invitations ")]),description:t(()=>[r(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")]),content:t(()=>[o("div",ce,[(n(!0),a(C,null,w(i.team.team_invitations,e=>(n(),a("div",{key:e.id,class:"flex items-center justify-between"},[o("div",de,_(e.email),1),o("div",ue,[i.userPermissions.canRemoveTeamMembers?(n(),a("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:b=>N(e)}," Cancel ",8,ve)):u("",!0)])]))),128))])]),_:1})])):u("",!0),i.team.users.length>0?(n(),a("div",fe,[l(S),l(j,{class:"mt-10 sm:mt-0"},{title:t(()=>[r(" Team Members ")]),description:t(()=>[r(" All of the people that are part of this team. ")]),content:t(()=>[o("div",be,[(n(!0),a(C,null,w(i.team.users,e=>(n(),a("div",{key:e.id,class:"flex items-center justify-between"},[o("div",_e,[o("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,ye),o("div",ge,_(e.name),1)]),o("div",pe,[i.userPermissions.canAddTeamMembers&&i.availableRoles.length?(n(),a("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:b=>O(e)},_(A(e.membership.role)),9,he)):i.availableRoles.length?(n(),a("div",ke,_(A(e.membership.role)),1)):u("",!0),d.$page.props.user.id===e.id?(n(),a("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:I}," Leave ")):i.userPermissions.canRemoveTeamMembers?(n(),a("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:b=>D(e)}," Remove ",8,xe)):u("",!0)])]))),128))])]),_:1})])):u("",!0),l(Q,{show:p.value,onClose:m[2]||(m[2]=e=>p.value=!1)},{title:t(()=>[r(" Manage Role ")]),content:t(()=>[$.value?(n(),a("div",Ce,[o("div",we,[(n(!0),a(C,null,w(i.availableRoles,(e,b)=>(n(),a("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":b>0,"rounded-b-none":b!==Object.keys(i.availableRoles).length-1}]),onClick:q=>s(f).role=e.key},[o("div",{class:v({"opacity-50":s(f).role&&s(f).role!==e.key})},[o("div",Re,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":s(f).role===e.key}])},_(e.name),3),s(f).role===e.key?(n(),a("svg",$e,Se)):u("",!0)]),o("div",Ae,_(e.description),1)],2)],10,Te))),128))])])):u("",!0)]),footer:t(()=>[l(M,{onClick:m[1]||(m[1]=e=>p.value=!1)},{default:t(()=>[r(" Cancel ")]),_:1}),l(V,{class:v(["ml-3",{"opacity-25":s(f).processing}]),disabled:s(f).processing,onClick:E},{default:t(()=>[r(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:h.value,onClose:m[4]||(m[4]=e=>h.value=!1)},{title:t(()=>[r(" Leave Team ")]),content:t(()=>[r(" Are you sure you would like to leave this team? ")]),footer:t(()=>[l(M,{onClick:m[3]||(m[3]=e=>h.value=!1)},{default:t(()=>[r(" Cancel ")]),_:1}),l(P,{class:v(["ml-3",{"opacity-25":s(T).processing}]),disabled:s(T).processing,onClick:J},{default:t(()=>[r(" Leave ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:y.value,onClose:m[6]||(m[6]=e=>y.value=null)},{title:t(()=>[r(" Remove Team Member ")]),content:t(()=>[r(" Are you sure you would like to remove this person from the team? ")]),footer:t(()=>[l(M,{onClick:m[5]||(m[5]=e=>y.value=null)},{default:t(()=>[r(" Cancel ")]),_:1}),l(P,{class:v(["ml-3",{"opacity-25":s(R).processing}]),disabled:s(R).processing,onClick:U},{default:t(()=>[r(" Remove ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{He as default};
